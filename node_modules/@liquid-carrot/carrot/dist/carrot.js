/*!
 * The MIT License
 * 
 * Copyright (c) 2018-present Liquid Carrot Corporation <people@liquidcarrot.io> https://liquidcarrot.io. 
 * 
 * Copyright for portions of Carrot are held by the following parties as a part of project Carrot:
 * - Copyright 2017 Thomas Wagenaar <wagenaartje@protonmail.com>
 * - Copyright 2017 Juan Cazala - cazala.com
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("child_process"),require("os")):"function"==typeof define&&define.amd?define(["child_process","os"],n):"object"==typeof exports?exports.carrot=n(require("child_process"),require("os")):t.carrot=n(t.child_process,t.os)}(window,function(t,n){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=11)}([function(t,n,e){var r={activation:e(4),mutation:e(12),selection:e(13),crossover:e(14),cost:e(15),gating:e(16),connection:e(17),rate:e(18)};t.exports=r},function(t,n){t.exports={warnings:!1}},function(t,n,e){let r=e(6),o=e(0),i=e(5);e(1);function u(t){this.bias="input"===t?0:.2*Math.random()-.1,this.squash=o.activation.LOGISTIC,this.type=t||"hidden",this.activation=0,this.state=0,this.old=0,this.mask=1,this.previousDeltaBias=0,this.totalDeltaBias=0,this.deltabias={previous:0,total:0},this.connections={in:[],out:[],gated:[],self:new i(this,this,0)},this.error={responsibility:0,projected:0,gated:0}}u.prototype={activate:function(t,n){if(!r.isNil(t)){if(r.isNumber(t)){if(r.isFinite(t))return this.activation=t,this.activation;throw new TypeError('Parameter "input": '+t+' is not a valid "number".')}throw new TypeError('Parameter "input": Expected a "number", got a '+typeof t)}if("input"===this.type)return this.activation=0,this.activation;var e;for(this.old=this.state,this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias,e=0;e<this.connections.in.length;e++){const t=this.connections.in[e];this.state+=t.from.activation*t.weight*t.gain}this.activation=this.squash(this.state)*this.mask,this.derivative=this.squash(this.state,!0);var o=[],i=[];for(e=0;e<this.connections.gated.length;e++){let t=this.connections.gated[e],n=t.to,r=o.indexOf(n);r>-1?i[r]+=t.weight*t.from.activation:(o.push(n),i.push(t.weight*t.from.activation+(n.connections.self.gater===this?n.old:0))),t.gain=this.activation}for(e=0;e<this.connections.in.length;e++){let t=this.connections.in[e];t.elegibility=this.connections.self.gain*this.connections.self.weight*t.elegibility+t.from.activation*t.gain;for(var u=0;u<o.length;u++){let n=o[u],e=i[u],r=t.xtrace.nodes.indexOf(n);r>-1?t.xtrace.values[r]=n.connections.self.gain*n.connections.self.weight*t.xtrace.values[r]+this.derivative*t.elegibility*e:(t.xtrace.nodes.push(n),t.xtrace.values.push(this.derivative*t.elegibility*e))}}return this.activation},noTraceActivate:function(t){if(!r.isNil(t)){if(r.isNumber(t)){if(r.isFinite(t))return this.activation=t,this.activation;throw new TypeError('Parameter "input": '+t+' is not a valid "number".')}throw new TypeError('Parameter "input": Expected a "number", got a '+typeof t)}var n;for(this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias,n=0;n<this.connections.in.length;n++){var e=this.connections.in[n];this.state+=e.from.activation*e.weight*e.gain}for(this.activation=this.squash(this.state),n=0;n<this.connections.gated.length;n++)this.connections.gated[n].gain=this.activation;return this.activation},propagate:function(t,n,e,o){if(!r.isNil(t)){if(!r.isNumber(t))throw new TypeError('Parameter "rate": Expected a "number", got a '+typeof t);if(!r.isFinite(t))throw new TypeError('Parameter "rate": '+t+' is not a valid "number".')}if(!r.isNil(n)){if(!r.isNumber(n))throw new TypeError('Parameter "momentum": Expected a "number", got a '+typeof n);if(!r.isFinite(n))throw new TypeError('Parameter "momentum": '+n+' is not a valid "number".')}if(!r.isNil(e)&&!r.isBoolean(e))throw new TypeError('Parameter "update": Expected a "boolean", got a '+typeof e);if(!r.isNil(o)){if(!r.isNumber(o))throw new TypeError('Parameter "target": Expected a "number", got a '+typeof o);if(!r.isFinite(o))throw new TypeError('Parameter "target": '+o+' is not a valid "number".')}n=n||0,t=t||.3;var i=0;if("output"===this.type)this.error.responsibility=this.error.projected=o-this.activation;else{var u;for(u=0;u<this.connections.out.length;u++){let t=this.connections.out[u];i+=t.to.error.responsibility*t.weight*t.gain}for(this.error.projected=this.derivative*i,i=0,u=0;u<this.connections.gated.length;u++){let t=this.connections.gated[u],n=t.to,e=n.connections.self.gater===this?n.old:0;e+=t.weight*t.from.activation,i+=n.error.responsibility*e}this.error.gated=this.derivative*i,this.error.responsibility=this.error.projected+this.error.gated}if("constant"!==this.type){for(u=0;u<this.connections.in.length;u++){let r=this.connections.in[u],o=this.error.projected*r.elegibility;for(var a=0;a<r.xtrace.nodes.length;a++){let t=r.xtrace.nodes[a],n=r.xtrace.values[a];o+=t.error.responsibility*n}let i=t*o*this.mask;r.totalDeltaWeight+=i,e&&(r.totalDeltaWeight+=n*r.previousDeltaWeight,r.weight+=r.totalDeltaWeight,r.previousDeltaWeight=r.totalDeltaWeight,r.totalDeltaWeight=0)}var s=t*this.error.responsibility;this.totalDeltaBias+=s,e&&(this.totalDeltaBias+=n*this.previousDeltaBias,this.bias+=this.totalDeltaBias,this.previousDeltaBias=this.totalDeltaBias,this.totalDeltaBias=0)}},connect:function(t,n){var e=[];if(void 0!==t.bias){if(this.isProjectingTo(t))throw new Error("Already projecting a connection to this node!");if(t===this)this.connections.self.weight=n||1,e.push(this.connections.self);else{let r=new i(this,t,n);t.connections.in.push(r),this.connections.out.push(r),e.push(r)}}else for(var r=0;r<t.nodes.length;r++){let o=new i(this,t.nodes[r],n);t.nodes[r].connections.in.push(o),this.connections.out.push(o),t.connections.in.push(o),e.push(o)}return e},disconnect:function(t,n){if(this!==t){for(var e=0;e<this.connections.out.length;e++){let n=this.connections.out[e];if(n.to===t){this.connections.out.splice(e,1);let t=n.to.connections.in.indexOf(n);n.to.connections.in.splice(t,1),null!==n.gater&&n.gater.ungate(n);break}}n&&t.disconnect(this)}else this.connections.self.weight=0},gate:function(t){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var e=t[n];this.connections.gated.push(e),e.gater=this}},ungate:function(t){Array.isArray(t)||(t=[t]);for(var n=t.length-1;n>=0;n--){var e=t[n],r=this.connections.gated.indexOf(e);this.connections.gated.splice(r,1),e.gater=null,e.gain=1}},clear:function(){for(var t=0;t<this.connections.in.length;t++){var n=this.connections.in[t];n.elegibility=0,n.xtrace={nodes:[],values:[]}}for(t=0;t<this.connections.gated.length;t++){this.connections.gated[t].gain=0}this.error.responsibility=this.error.projected=this.error.gated=0,this.old=this.state=this.activation=0},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!(t.name in o.mutation))throw new Error("This method does not exist!");switch(t){case o.mutation.MOD_ACTIVATION:var n=t.allowed[(t.allowed.indexOf(this.squash)+Math.floor(Math.random()*(t.allowed.length-1))+1)%t.allowed.length];this.squash=n;break;case o.mutation.MOD_BIAS:var e=Math.random()*(t.max-t.min)+t.min;this.bias+=e}},isProjectingTo:function(t){if(t===this&&0!==this.connections.self.weight)return!0;for(var n=0;n<this.connections.out.length;n++){if(this.connections.out[n].to===t)return!0}return!1},isProjectedBy:function(t){if(t===this&&0!==this.connections.self.weight)return!0;for(var n=0;n<this.connections.in.length;n++){if(this.connections.in[n].from===t)return!0}return!1},toJSON:function(){return{bias:this.bias,type:this.type,squash:this.squash.name,mask:this.mask}}},u.fromJSON=function(t){var n=new u;return n.bias=t.bias,n.type=t.type,n.mask=t.mask,n.squash=o.activation[t.squash],n},t.exports=u},function(t,n,e){let r=e(6),o=e(10);var i=e(7),u=e(0),a=e(5),s=e(1),c=e(2),f=u.mutation;function l(t,n){if(void 0===t||void 0===n)throw new Error("No input or output size given");var e;for(this.input=t,this.output=n,this.nodes=[],this.connections=[],this.gates=[],this.selfconns=[],this.dropout=0,e=0;e<this.input+this.output;e++){var r=e<this.input?"input":"output";this.nodes.push(new c(r))}for(e=0;e<this.input;e++)for(var o=this.input;o<this.output+this.input;o++){var i=Math.random()*this.input*Math.sqrt(2/this.input);this.connect(this.nodes[e],this.nodes[o],i)}}l.prototype={activate:function(t,n){for(var e=[],r=0;r<this.nodes.length;r++)if("input"===this.nodes[r].type)this.nodes[r].activate(t[r]);else if("output"===this.nodes[r].type){var o=this.nodes[r].activate();e.push(o)}else n&&(this.nodes[r].mask=Math.random()<this.dropout?0:1),this.nodes[r].activate();return e},noTraceActivate:function(t){for(var n=[],e=0;e<this.nodes.length;e++)if("input"===this.nodes[e].type)this.nodes[e].noTraceActivate(t[e]);else if("output"===this.nodes[e].type){var r=this.nodes[e].noTraceActivate();n.push(r)}else this.nodes[e].noTraceActivate();return n},propagate:function(t,n,e,r){if(void 0===r||r.length!==this.output)throw new Error("Output target length should match network output length");var o,i=r.length;for(o=this.nodes.length-1;o>=this.nodes.length-this.output;o--)this.nodes[o].propagate(t,n,e,r[--i]);for(o=this.nodes.length-this.output-1;o>=this.input;o--)this.nodes[o].propagate(t,n,e)},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()},connect:function(t,n,e){let r=t.connect(n,e);for(let e=0;e<r.length;e++){let o=r[e];t!==n?this.connections.push(o):this.selfconns.push(o)}return r},disconnect:function(t,n){for(var e=t===n?this.selfconns:this.connections,r=0;r<e.length;r++){var o=e[r];if(o.from===t&&o.to===n){null!==o.gater&&this.ungate(o),e.splice(r,1);break}}t.disconnect(n)},gate:function(t,n){if(-1===this.nodes.indexOf(t))throw new Error("This node is not part of the network!");null==n.gater?(t.gate(n),this.gates.push(n)):s.warnings&&console.warn("This connection is already gated!")},ungate:function(t){var n=this.gates.indexOf(t);if(-1===n)throw new Error("This connection is not gated!");this.gates.splice(n,1),t.gater.ungate(t)},remove:function(t){var n=this.nodes.indexOf(t);if(-1===n)throw new Error("This node does not exist in the network!");var e=[];this.disconnect(t,t);for(var r=[],o=t.connections.in.length-1;o>=0;o--){let n=t.connections.in[o];f.SUB_NODE.keep_gates&&null!==n.gater&&n.gater!==t&&e.push(n.gater),r.push(n.from),this.disconnect(n.from,t)}var i=[];for(o=t.connections.out.length-1;o>=0;o--){let n=t.connections.out[o];f.SUB_NODE.keep_gates&&null!==n.gater&&n.gater!==t&&e.push(n.gater),i.push(n.to),this.disconnect(t,n.to)}var u=[];for(o=0;o<r.length;o++){let t=r[o];for(var a=0;a<i.length;a++){let n=i[a];if(!t.isProjectingTo(n)){var s=this.connect(t,n);u.push(s[0])}}}for(o=0;o<e.length&&0!==u.length;o++){let t=e[o],n=Math.floor(Math.random()*u.length);this.gate(t,u[n]),u.splice(n,1)}for(o=t.connections.gated.length-1;o>=0;o--){let n=t.connections.gated[o];this.ungate(n)}this.disconnect(t,t),this.nodes.splice(n,1)},mutate:function(t){if(void 0===t)throw new Error("No (correct) mutate method given!");var n,e;switch(t){case f.ADD_NODE:var o=(d=this.connections[Math.floor(Math.random()*this.connections.length)]).gater;this.disconnect(d.from,d.to);var i=this.nodes.indexOf(d.to),u=new c("hidden");f.ADD_NODE.randomActivation&&u.mutate(f.MOD_ACTIVATION);var a=Math.min(i,this.nodes.length-this.output);this.nodes.splice(a,0,u);var l=this.connect(d.from,u)[0],h=this.connect(u,d.to)[0];return null!=o&&this.gate(o,Math.random()>=.5?l:h),!0;case f.SUB_NODE:{if(this.nodes.length===this.input+this.output)return s.warnings&&console.warn("No more nodes left to remove!"),!1;let t=r.filter(this.nodes,function(t){return"output"!==t.type&&"input"!==t.type});return this.remove(r.sample(t)),!0}case f.ADD_CONN:var p=[];for(n=0;n<this.nodes.length-this.output;n++){let t=this.nodes[n];for(e=Math.max(n+1,this.input);e<this.nodes.length;e++){let n=this.nodes[e];t.isProjectingTo(n)||p.push([t,n])}}if(0===p.length)return s.warnings&&console.warn("No more connections to be made!"),!1;var g=p[Math.floor(Math.random()*p.length)];return this.connect(g[0],g[1]),!0;case f.SUB_CONN:{let t=[];for(n=0;n<this.connections.length;n++){let e=this.connections[n];e.from.connections.out.length>1&&e.to.connections.in.length>1&&this.nodes.indexOf(e.to)>this.nodes.indexOf(e.from)&&t.push(e)}if(0===t.length)return s.warnings&&console.warn("No connections to remove!"),!1;var v=t[Math.floor(Math.random()*t.length)];return this.disconnect(v.from,v.to),!0}case f.MOD_WEIGHT:var d=(y=this.connections.concat(this.selfconns))[Math.floor(Math.random()*y.length)],_=Math.random()*(t.max-t.min)+t.min;return d.weight+=_,!0;case f.MOD_BIAS:var m=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input);return(u=this.nodes[m]).mutate(t),!0;case f.MOD_ACTIVATION:{if(!t.mutateOutput&&this.input+this.output===this.nodes.length)return s.warnings&&console.warn("No nodes that allow mutation of activation function"),!1;let n;return n=t.mutateOutput?r.filter(this.nodes,function(t,n){return"input"!==t.type}):r.filter(this.nodes,function(t,n){return"input"!==t.type&&"output"!==t.type}),r.sample(n).mutate(t),!0}case f.ADD_SELF_CONN:{let t=[];for(n=this.input;n<this.nodes.length;n++){let e=this.nodes[n];0===e.connections.self.weight&&t.push(e)}if(0===t.length)return s.warnings&&console.warn("No more self-connections to add!"),!1;u=t[Math.floor(Math.random()*t.length)];return this.connect(u,u),!0}case f.SUB_SELF_CONN:if(0===this.selfconns.length)return s.warnings&&console.warn("No more self-connections to remove!"),!1;var w=this.selfconns[Math.floor(Math.random()*this.selfconns.length)];return this.disconnect(w.from,w.to),!0;case f.ADD_GATE:{var y=this.connections.concat(this.selfconns);let t=[];for(n=0;n<y.length;n++){let e=y[n];null===e.gater&&t.push(e)}if(0===t.length)return s.warnings&&console.warn("No more connections to gate!"),!1;m=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),u=this.nodes[m],w=t[Math.floor(Math.random()*t.length)];return this.gate(u,w),!0}case f.SUB_GATE:if(0===this.gates.length)return s.warnings&&console.warn("No more connections to ungate!"),!1;m=Math.floor(Math.random()*this.gates.length);var O=this.gates[m];return this.ungate(O),!0;case f.ADD_BACK_CONN:p=[];for(n=this.input;n<this.nodes.length;n++){let t=this.nodes[n];for(e=this.input;e<n;e++){let n=this.nodes[e];t.isProjectingTo(n)||p.push([t,n])}}if(0===p.length)return s.warnings&&console.warn("No more connections to be made!"),!1;g=p[Math.floor(Math.random()*p.length)];return this.connect(g[0],g[1]),!0;case f.SUB_BACK_CONN:{let t=[];for(n=0;n<this.connections.length;n++){let e=this.connections[n];e.from.connections.out.length>1&&e.to.connections.in.length>1&&this.nodes.indexOf(e.from)>this.nodes.indexOf(e.to)&&t.push(e)}if(0===t.length)return s.warnings&&console.warn("No connections to remove!"),!1;v=t[Math.floor(Math.random()*t.length)];return this.disconnect(v.from,v.to),!0}case f.SWAP_NODES:{if(t.mutateOutput&&this.nodes.length-1-this.input<2||!t.mutateOutput&&this.nodes.length-1-this.input-this.output<2)return s.warnings&&console.warn("No nodes that allow swapping of bias and activation function"),!1;let n,e,o;if(t.mutateOutput){if((n=r.filter(this.nodes,function(t,n){return"input"!==t.type})).length<2)return s.warnings&&console.warn("Less than 2 availables nodes, SWAP_NODES mutation failed!"),!1;e=r.sample(n);let t=r.filter(n,function(t,n){return t!==e});o=r.sample(t)}else{if((n=r.filter(this.nodes,function(t,n){return"input"!==t.type&&"output"!==t.type})).length<2)return s.warnings&&console.warn("Less than 2 availables nodes, SWAP_NODES mutation failed!"),!1;e=r.sample(n);let t=r.filter(n,function(t,n){return t!==e});o=r.sample(t)}var A=e.bias,b=e.squash;return e.bias=o.bias,e.squash=o.squash,o.bias=A,o.squash=b,!0}}},train:function(t,n){if(t[0].input.length!==this.input||t[0].output.length!==this.output)throw new Error("Dataset input/output size should be same as network input/output size!");(n=n||{}).iterations=n.operations||1e3,void 0===n.rate&&s.warnings&&console.warn("Using default learning rate, please define a rate!"),void 0===n.iterations&&s.warnings&&console.warn("No target iterations given, running until error is reached!");let e=n.error||.05,r=n.cost||u.cost.MSE,o=n.rate||.3,i=n.dropout||0,a=n.momentum||0,c=n.batchSize||1,f=n.ratePolicy||u.rate.FIXED(),l=Date.now();if(c>t.length)throw new Error("Batch size must be smaller or equal to dataset length!");if(void 0===n.iterations&&void 0===n.error)throw new Error("At least one of the following options must be specified: error, iterations");if(void 0===n.error?e=-1:void 0===n.iterations&&(n.iterations=0),this.dropout=i,n.crossValidate){let e=Math.ceil((1-n.crossValidate.testSize)*t.length);var h=t.slice(0,e),p=t.slice(e)}for(var g,v,d,_=o,m=0,w=1;w>e&&(0===n.iterations||m<n.iterations)&&!(n.crossValidate&&w<=n.crossValidate.testError);){if(_=f(o,++m),n.crossValidate?(this._trainSet(h,c,_,a,r),n.clear&&this.clear(),w=this.test(p,r).error,n.clear&&this.clear()):(w=this._trainSet(t,c,_,a,r),n.clear&&this.clear()),n.shuffle)for(g=t.length;g;v=Math.floor(Math.random()*g),d=t[--g],t[g]=t[v],t[v]=d);n.log&&m%n.log==0&&console.log("iteration",m,"error",w,"rate",_),n.schedule&&m%n.schedule.iterations==0&&n.schedule.function({error:w,iteration:m})}if(n.clear&&this.clear(),i)for(g=0;g<this.nodes.length;g++)"hidden"!==this.nodes[g].type&&"constant"!==this.nodes[g].type||(this.nodes[g].mask=1-this.dropout);return{error:w,iterations:m,time:Date.now()-l}},_trainSet:function(t,n,e,r,o){for(var i=0,u=0;u<t.length;u++){var a=t[u].input,s=t[u].output,c=!((u+1)%n!=0&&u+1!==t.length),f=this.activate(a,!0);this.propagate(e,r,c,s),i+=o(s,f)}return i/t.length},test:function(t,n=u.cost.MSE){var e;if(this.dropout)for(e=0;e<this.nodes.length;e++)"hidden"!==this.nodes[e].type&&"constant"!==this.nodes[e].type||(this.nodes[e].mask=1-this.dropout);var r=0,o=Date.now();for(e=0;e<t.length;e++){let o=t[e].input;r+=n(t[e].output,this.noTraceActivate(o))}return{error:r/=t.length,time:Date.now()-o}},graph:function(t,n){var e,r=0,o=0,i={nodes:[],links:[],constraints:[{type:"alignment",axis:"x",offsets:[]},{type:"alignment",axis:"y",offsets:[]}]};for(e=0;e<this.nodes.length;e++){var u=this.nodes[e];"input"===u.type?(1===this.input?i.constraints[0].offsets.push({node:e,offset:0}):i.constraints[0].offsets.push({node:e,offset:.8*t/(this.input-1)*r++}),i.constraints[1].offsets.push({node:e,offset:0})):"output"===u.type&&(1===this.output?i.constraints[0].offsets.push({node:e,offset:0}):i.constraints[0].offsets.push({node:e,offset:.8*t/(this.output-1)*o++}),i.constraints[1].offsets.push({node:e,offset:-.8*n})),i.nodes.push({id:e,name:"hidden"===u.type?u.squash.name:u.type.toUpperCase(),activation:u.activation,bias:u.bias})}var a=this.connections.concat(this.selfconns);for(e=0;e<a.length;e++){var s=a[e];if(null==s.gater)i.links.push({source:this.nodes.indexOf(s.from),target:this.nodes.indexOf(s.to),weight:s.weight});else{var c=i.nodes.length;i.nodes.push({id:c,activation:s.gater.activation,name:"GATE"}),i.links.push({source:this.nodes.indexOf(s.from),target:c,weight:.5*s.weight}),i.links.push({source:c,target:this.nodes.indexOf(s.to),weight:.5*s.weight}),i.links.push({source:this.nodes.indexOf(s.gater),target:c,weight:s.gater.activation,gate:!0})}}return i},toJSON:function(){var t,n={nodes:[],connections:[],input:this.input,output:this.output,dropout:this.dropout};for(t=0;t<this.nodes.length;t++)this.nodes[t].index=t;for(t=0;t<this.nodes.length;t++){let e=this.nodes[t],r=e.toJSON();if(r.index=t,n.nodes.push(r),0!==e.connections.self.weight){let r=e.connections.self.toJSON();r.from=t,r.to=t,r.gater=null!=e.connections.self.gater?e.connections.self.gater.index:null,n.connections.push(r)}}for(t=0;t<this.connections.length;t++){let e=this.connections[t],r=e.toJSON();r.from=e.from.index,r.to=e.to.index,r.gater=null!=e.gater?e.gater.index:null,n.connections.push(r)}return n},set:function(t){for(var n=0;n<this.nodes.length;n++)this.nodes[n].bias=t.bias||this.nodes[n].bias,this.nodes[n].squash=t.squash||this.nodes[n].squash},evolve:async function(t,n){if(t[0].input.length!==this.input||t[0].output.length!==this.output)throw new Error("Dataset input/output size should be same as network input/output size!");let r;void 0===(n=n||{}).iterations&&void 0===n.error?(n.iterations=1e3,r=.05):n.iterations?r=-1:n.error&&(r=n.error,n.iterations=0);var o=void 0!==n.growth?n.growth:1e-4,a=n.cost||u.cost.MSE;n.amount;let s=t;var c=n.threads;void 0===c&&(c="undefined"==typeof window?e(28).cpus().length:navigator.hardwareConcurrency);var f=Date.now();if(1===c)n.fitness=function(t=s,n,e=1,r=u.cost.MSE,o=1e-4){for(var i=0,a=0;a<e;a++)i-=n.test(t,r).error;return i-=(n.nodes.length-n.input-n.output+n.connections.length+n.gates.length)*o,(i=isNaN(i)?-1/0:i)/e};else{var l=i.serializeDataSet(t),p=[];if("undefined"==typeof window)for(var g=0;g<c;g++)p.push(new i.workers.node.TestWorker(l,a));else for(g=0;g<c;g++)p.push(new i.workers.browser.TestWorker(l,a));n.fitness=function(t,n){return new Promise((t,e)=>{for(var r=n.slice(),i=0,u=function(n){if(r.length){var e=r.shift();n.evaluate(e).then(function(t){e.score=-t,e.score-=(e.nodes.length-e.input-e.output+e.connections.length+e.gates.length)*o,e.score=isNaN(parseFloat(t))?-1/0:e.score,u(n)})}else++i===c&&t()},a=0;a<p.length;a++)u(p[a])})},n.fitnessPopulation=!0}n.network=this,n.input=this.input,n.output=this.output;for(var v,d=new h(t,n),_=-1/0,m=-1/0;_<-r&&(0===n.iterations||d.generation<n.iterations);){let t=await d.evolve(),e=t.score;_=e+(t.nodes.length-t.input-t.output+t.connections.length+t.gates.length)*o,e>m&&(m=e,v=t),n.log&&d.generation%n.log==0&&console.log("iteration",d.generation,"fitness",e,"error",-_),n.schedule&&d.generation%n.schedule.iterations==0&&n.schedule.function({fitness:e,error:-_,iteration:d.generation})}if(c>1)for(g=0;g<p.length;g++)p[g].terminate();return void 0!==v&&(this.nodes=v.nodes,this.connections=v.connections,this.selfconns=v.selfconns,this.gates=v.gates,n.clear&&this.clear()),{error:-_,iterations:d.generation,time:Date.now()-f}},standalone:function(){var t,n=[],e=[],r=[],o=[],i=[];for(t=0;t<this.input;t++){var u=this.nodes[t];e.push(u.activation),r.push(u.state)}for(o.push("for(var i = 0; i < input.length; i++) A[i] = input[i];"),t=0;t<this.nodes.length;t++)this.nodes[t].index=t;for(t=this.input;t<this.nodes.length;t++){let u=this.nodes[t];e.push(u.activation),r.push(u.state);var a=n.indexOf(u.squash.name);-1===a&&(a=n.length,n.push(u.squash.name),i.push(u.squash.toString()));for(var s=[],c=0;c<u.connections.in.length;c++){var f=u.connections.in[c],l=`A[${f.from.index}] * ${f.weight}`;null!=f.gater&&(l+=` * A[${f.gater.index}]`),s.push(l)}if(u.connections.self.weight){let n=u.connections.self,e=`S[${t}] * ${n.weight}`;null!=n.gater&&(e+=` * A[${n.gater.index}]`),s.push(e)}var h=`S[${t}] = ${s.join(" + ")} + ${u.bias};`,p=`A[${t}] = F[${a}](S[${t}])${u.mask?"":" * "+u.mask};`;o.push(h),o.push(p)}var g=[];for(t=this.nodes.length-this.output;t<this.nodes.length;t++)g.push(`A[${t}]`);g=`return [${g.join(",")}];`,o.push(g);var v="";return v+=`var F = [${i.toString()}];\r\n`,v+=`var A = [${e.toString()}];\r\n`,v+=`var S = [${r.toString()}];\r\n`,v+=`function activate(input){\r\n${o.join("\r\n")}\r\n}`},serialize:function(){var t,n=[],e=[],r=[],o=["LOGISTIC","TANH","IDENTITY","STEP","RELU","SOFTSIGN","SINUSOID","GAUSSIAN","BENT_IDENTITY","BIPOLAR","BIPOLAR_SIGMOID","HARD_TANH","ABSOLUTE","INVERSE","SELU"];for(r.push(this.input),r.push(this.output),t=0;t<this.nodes.length;t++){let r=this.nodes[t];r.index=t,n.push(r.activation),e.push(r.state)}for(t=this.input;t<this.nodes.length;t++){let n=this.nodes[t];r.push(n.index),r.push(n.bias),r.push(o.indexOf(n.squash.name)),r.push(n.connections.self.weight),r.push(null==n.connections.self.gater?-1:n.connections.self.gater.index);for(var i=0;i<n.connections.in.length;i++){let t=n.connections.in[i];r.push(t.from.index),r.push(t.weight),r.push(null==t.gater?-1:t.gater.index)}r.push(-2)}return[n,e,r]}},l.fromJSON=function(t){var n,e=new l(t.input,t.output);for(e.dropout=t.dropout,e.nodes=[],e.connections=[],n=0;n<t.nodes.length;n++)e.nodes.push(c.fromJSON(t.nodes[n]));for(n=0;n<t.connections.length;n++){var r=t.connections[n],o=e.connect(e.nodes[r.from],e.nodes[r.to])[0];o.weight=r.weight,null!=r.gater&&e.gate(e.nodes[r.gater],o)}return e},l.merge=function(t,n){if(t=l.fromJSON(t.toJSON()),n=l.fromJSON(n.toJSON()),t.output!==n.input)throw new Error("Output size of network1 should be the same as the input size of network2!");var e;for(e=0;e<n.connections.length;e++){let r=n.connections[e];if("input"===r.from.type){let e=n.nodes.indexOf(r.from);r.from=t.nodes[t.nodes.length-1-e]}}for(e=n.input-1;e>=0;e--)n.nodes.splice(e,1);for(e=t.nodes.length-t.output;e<t.nodes.length;e++)t.nodes[e].type="hidden";return t.connections=t.connections.concat(n.connections),t.nodes=t.nodes.concat(n.nodes),t},l.crossOver=function(t,n,e){if(t.input!==n.input||t.output!==n.output)throw new Error("Networks don't have the same input/output size!");var r=new l(t.input,t.output);r.connections=[],r.nodes=[];var o,i=t.score||0,u=n.score||0;if(e||i===u){let e=Math.max(t.nodes.length,n.nodes.length),r=Math.min(t.nodes.length,n.nodes.length);o=Math.floor(Math.random()*(e-r+1)+r)}else o=i>u?t.nodes.length:n.nodes.length;var s,f=t.output;for(s=0;s<t.nodes.length;s++)t.nodes[s].index=s;for(s=0;s<n.nodes.length;s++)n.nodes[s].index=s;for(s=0;s<o;s++){var h;if(s<o-f){let e=Math.random();h=e>=.5?t.nodes[s]:n.nodes[s];let r=e<.5?t.nodes[s]:n.nodes[s];void 0!==h&&"output"!==h.type||(h=r)}else h=Math.random()>=.5?t.nodes[t.nodes.length+s-o]:n.nodes[n.nodes.length+s-o];var p=new c;p.bias=h.bias,p.squash=h.squash,p.type=h.type,r.nodes.push(p)}var g={},v={};for(s=0;s<t.connections.length;s++){let n=t.connections[s],e={weight:n.weight,from:n.from.index,to:n.to.index,gater:null!=n.gater?n.gater.index:-1};g[a.innovationID(e.from,e.to)]=e}for(s=0;s<t.selfconns.length;s++){let n=t.selfconns[s],e={weight:n.weight,from:n.from.index,to:n.to.index,gater:null!=n.gater?n.gater.index:-1};g[a.innovationID(e.from,e.to)]=e}for(s=0;s<n.connections.length;s++){let t=n.connections[s],e={weight:t.weight,from:t.from.index,to:t.to.index,gater:null!=t.gater?t.gater.index:-1};v[a.innovationID(e.from,e.to)]=e}for(s=0;s<n.selfconns.length;s++){let t=n.selfconns[s],e={weight:t.weight,from:t.from.index,to:t.to.index,gater:null!=t.gater?t.gater.index:-1};v[a.innovationID(e.from,e.to)]=e}var d=[],_=Object.keys(g),m=Object.keys(v);for(s=_.length-1;s>=0;s--)if(void 0!==v[_[s]]){let t=Math.random()>=.5?g[_[s]]:v[_[s]];d.push(t),v[_[s]]=void 0}else(i>=u||e)&&d.push(g[_[s]]);if(u>=i||e)for(s=0;s<m.length;s++)void 0!==v[m[s]]&&d.push(v[m[s]]);for(s=0;s<d.length;s++){let t=d[s];if(t.to<o&&t.from<o){let n=r.nodes[t.from],e=r.nodes[t.to],i=r.connect(n,e)[0];i.weight=t.weight,-1!==t.gater&&t.gater<o&&r.gate(r.nodes[t.gater],i)}}return r},t.exports=l;let h=function(t,{generation:n=0,input:e=1,output:i=1,equal:a=!0,clean:c=!1,popsize:f=50,growth:h=1e-4,cost:p=u.cost.MSE,amount:g=1,elitism:v=1,provenance:d=0,mutationRate:_=.4,mutationAmount:m=1,fitnessPopulation:w=!1,fitness:y=function(n=t,e,r=1,o=u.cost.MSE,i=1e-4){let a=0;for(let t=0;t<r;t++)a-=e.test(n,o).error;return a-=(e.nodes.length-e.input-e.output+e.connections.length+e.gates.length)*i,(a=isNaN(a)?-1/0:a)/r},selection:O=u.selection.POWER,crossover:A=[u.crossover.SINGLE_POINT,u.crossover.TWO_POINT,u.crossover.UNIFORM,u.crossover.AVERAGE],mutation:b=u.mutation.FFW,efficientMutation:N=!1,template:T=new l(e,i),maxNodes:E=1/0,maxConns:x=1/0,maxGates:L=1/0,selectMutationMethod:S=this.selectMutationMethod}={}){let M=this;r.assignIn(M,{generation:n,input:e,output:i,equal:a,clean:c,popsize:f,growth:h,cost:p,amount:g,elitism:v,provenance:d,mutationRate:_,mutationAmount:m,fitnessPopulation:w,fitness:y,selection:O,crossover:A,mutation:b,efficientMutation:N,template:T,maxNodes:E,maxConns:x,maxGates:L,selectMutationMethod:S}),M.createPool=function(t,n){return Array(n).fill(l.fromJSON({...t.toJSON(),score:void 0}))},M.population=M.createPool(M.template,M.popsize),M.filterGenome=function(t,n,e,r){let o=[...t];const i=function(t){const n=e(t);if("boolean"!=typeof n)throw new Error("pickGenome must always return a boolean!");return n};if(r){for(let n=0;n<t.length;n++)if(i(o[n])){const t=r(o[n]);if(!(t instanceof l))throw new Error("adjustGenome must always return a network!");o[n]=t}}else for(let e=0;e<t.length;e++)i(o[e])&&(o[e]=l.fromJSON(n.toJSON));return o},M.selectMutationMethod=function(t,n,e){if(!e){let e=n||M.mutation,r=e[Math.floor(Math.random()*e.length)];return r===u.mutation.ADD_NODE&&t.nodes.length>=M.maxNodes?(s.warnings&&console.warn("maxNodes exceeded!"),null):r===u.mutation.ADD_CONN&&t.connections.length>=M.maxConns?(s.warnings&&console.warn("maxConns exceeded!"),null):r===u.mutation.ADD_GATE&&t.gates.length>=M.maxGates?(s.warnings&&console.warn("maxGates exceeded!"),null):r}{let e=n?[...n]:[...M.mutation],r=!1;for(;!r;){const n=e[Math.floor(Math.random()*e.length)];if((r=!(n===u.mutation.ADD_NODE&&t.nodes.length>=M.maxNodes||n===u.mutation.ADD_CONN&&t.connections.length>=M.maxConns||n===u.mutation.ADD_GATE&&t.gates.length>=M.maxGates)&&t.mutate(n))||!e||0===e.length)return;e=e.filter(function(t,e,r){return t.name!==n.name})}}},M.evolve=async function(n,e,i){if(M.elitism+M.provenance>M.popsize)throw new Error("Can't evolve! Elitism + provenance exceeds population size!");void 0===M.population[M.population.length-1].score&&await M.evaluate(r.isArray(n)?n:r.isArray(t)?t:o.is.required("dataset")),e&&(M.population=M.filterGenome(M.population,M.template,e,i)),M.sort();var u=[];for(let t=0;t<M.elitism;t++)u.push(M.population[t]);let a=Array(M.provenance).fill(l.fromJSON(M.template.toJSON()));for(let t=0;t<M.popsize-M.elitism-M.provenance;t++)a.push(M.getOffspring());M.population=a,M.mutate(),M.population.push(...u),await M.evaluate(r.isArray(n)?n:r.isArray(t)?t:o.is.required("dataset")),e&&(M.population=M.filterGenome(M.population,M.template,e,i)),M.sort();const s=l.fromJSON(M.population[0].toJSON());s.score=M.population[0].score;for(let t=0;t<M.population.length;t++)M.population[t].score=void 0;return M.generation++,s},M.getParent=function(){switch(M.selection.name){case"POWER":M.population[0].score<M.population[1].score&&M.sort();var t=Math.floor(Math.pow(Math.random(),M.selection.power)*M.population.length);return M.population[t];case"FITNESS_PROPORTIONATE":var n=0,e=0;for(let t=0;t<M.population.length;t++){var r=M.population[t].score;e=r<e?r:e,n+=r}n+=(e=Math.abs(e))*M.population.length;var o=Math.random()*n,i=0;for(let t=0;t<M.population.length;t++){let n=M.population[t];if(o<(i+=n.score+e))return n}return M.population[Math.floor(Math.random()*M.population.length)];case"TOURNAMENT":if(M.selection.size>M.popsize)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");var u=[];for(let t=0;t<M.selection.size;t++){let t=M.population[Math.floor(Math.random()*M.population.length)];u.push(t)}u.sort(function(t,n){return n.score-t.score});for(let t=0;t<M.selection.size;t++)if(Math.random()<M.selection.probability||t===M.selection.size-1)return u[t]}},M.getOffspring=function(){var t=M.getParent(),n=M.getParent();return l.crossOver(t,n,M.equal)},M.mutate=function(){for(let t=0;t<M.population.length;t++)if(Math.random()<=M.mutationRate)for(let n=0;n<M.mutationAmount;n++){const n=M.selectMutationMethod(M.population[t],M.mutation,M.efficientMutation);!M.efficientMutation&&M.population[t].mutate(n)}},M.evaluate=async function(t){if(M.fitnessPopulation){if(M.clear)for(let t=0;t<M.population.length;t++)M.population[t].clear();await M.fitness(t,M.population)}else for(let n=0;n<M.population.length;n++){const e=M.population[n];M.clear&&e.clear(),e.score=await M.fitness(t,e),M.population[n]=e}return M.sort(),M.population[0]},M.sort=function(){M.population.sort(function(t,n){return n.score-t.score})},M.getFittest=function(){return void 0===M.population[M.population.length-1].score&&M.evaluate(),M.population[0].score<M.population[1].score&&M.sort(),M.population[0]},M.getAverage=function(){void 0===M.population[M.population.length-1].score&&M.evaluate();var t=0;for(let n=0;n<M.population.length;n++)t+=M.population[n].score;return t/M.population.length},M.toJSON=function(){var t=[];for(let n=0;n<M.population.length;n++)t.push(M.population[n].toJSON());return t},M.fromJSON=function(t){var n=[];for(let e=0;e<t.length;e++)n.push(l.fromJSON(t[e]));M.population=n,M.popsize=n.length}}},function(t,n){var e={LOGISTIC:function(t,n){var e=1/(1+Math.exp(-t));return n?e*(1-e):e},TANH:function(t,n){return n?1-Math.pow(Math.tanh(t),2):Math.tanh(t)},IDENTITY:function(t,n){return n?1:t},STEP:function(t,n){return n?0:t>0?1:0},RELU:function(t,n){return n?t>0?1:0:t>0?t:0},SOFTSIGN:function(t,n){var e=1+Math.abs(t);return n?t/Math.pow(e,2):t/e},SINUSOID:function(t,n){return n?Math.cos(t):Math.sin(t)},GAUSSIAN:function(t,n){var e=Math.exp(-Math.pow(t,2));return n?-2*t*e:e},BENT_IDENTITY:function(t,n){var e=Math.sqrt(Math.pow(t,2)+1);return n?t/(2*e)+1:(e-1)/2+t},BIPOLAR:function(t,n){return n?0:t>0?1:-1},BIPOLAR_SIGMOID:function(t,n){var e=2/(1+Math.exp(-t))-1;return n?.5*(1+e)*(1-e):e},HARD_TANH:function(t,n){return n?t>-1&&t<1?1:0:Math.max(-1,Math.min(1,t))},ABSOLUTE:function(t,n){return n?t<0?-1:1:Math.abs(t)},INVERSE:function(t,n){return n?-1:1-t},SELU:function(t,n){var e=1.6732632423543772,r=1.0507009873554805,o=t>0?t:e*Math.exp(t)-e;return n?t>0?r:(o+e)*r:o*r}};t.exports=e},function(t,n){function e(t,n,e){this.from=t,this.to=n,this.gain=1,this.weight=void 0===e?.2*Math.random()-.1:e,this.gater=null,this.elegibility=0,this.previousDeltaWeight=0,this.totalDeltaWeight=0,this.xtrace={nodes:[],values:[]}}e.prototype={toJSON:function(){return{weight:this.weight}}},e.innovationID=function(t,n){return.5*(t+n)*(t+n+1)+n},t.exports=e},function(t,n,e){(function(t,r){var o;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,u=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="__lodash_hash_undefined__",f=500,l="__lodash_placeholder__",h=1,p=2,g=4,v=1,d=2,_=1,m=2,w=4,y=8,O=16,A=32,b=64,N=128,T=256,E=512,x=30,L="...",S=800,M=16,D=1,I=2,k=1/0,P=9007199254740991,j=1.7976931348623157e308,U=NaN,R=4294967295,z=R-1,C=R>>>1,B=[["ary",N],["bind",_],["bindKey",m],["curry",y],["curryRight",O],["flip",E],["partial",A],["partialRight",b],["rearg",T]],W="[object Arguments]",F="[object Array]",G="[object AsyncFunction]",q="[object Boolean]",$="[object Date]",J="[object DOMException]",V="[object Error]",H="[object Function]",Y="[object GeneratorFunction]",K="[object Map]",Z="[object Number]",X="[object Null]",Q="[object Object]",tt="[object Proxy]",nt="[object RegExp]",et="[object Set]",rt="[object String]",ot="[object Symbol]",it="[object Undefined]",ut="[object WeakMap]",at="[object WeakSet]",st="[object ArrayBuffer]",ct="[object DataView]",ft="[object Float32Array]",lt="[object Float64Array]",ht="[object Int8Array]",pt="[object Int16Array]",gt="[object Int32Array]",vt="[object Uint8Array]",dt="[object Uint8ClampedArray]",_t="[object Uint16Array]",mt="[object Uint32Array]",wt=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,Ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,At=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,Nt=RegExp(At.source),Tt=RegExp(bt.source),Et=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,kt=RegExp(It.source),Pt=/^\s+|\s+$/g,jt=/^\s+/,Ut=/\s+$/,Rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,$t=/^0b[01]+$/i,Jt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,Ht=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="[\\ud800-\\udfff]",nn="["+Qt+"]",en="["+Xt+"]",rn="\\d+",on="[\\u2700-\\u27bf]",un="[a-z\\xdf-\\xf6\\xf8-\\xff]",an="[^\\ud800-\\udfff"+Qt+rn+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",sn="\\ud83c[\\udffb-\\udfff]",cn="[^\\ud800-\\udfff]",fn="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",hn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",pn="(?:"+un+"|"+an+")",gn="(?:"+hn+"|"+an+")",vn="(?:"+en+"|"+sn+")"+"?",dn="[\\ufe0e\\ufe0f]?"+vn+("(?:\\u200d(?:"+[cn,fn,ln].join("|")+")[\\ufe0e\\ufe0f]?"+vn+")*"),_n="(?:"+[on,fn,ln].join("|")+")"+dn,mn="(?:"+[cn+en+"?",en,fn,ln,tn].join("|")+")",wn=RegExp("['’]","g"),yn=RegExp(en,"g"),On=RegExp(sn+"(?="+sn+")|"+mn+dn,"g"),An=RegExp([hn+"?"+un+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[nn,hn,"$"].join("|")+")",gn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[nn,hn+pn,"$"].join("|")+")",hn+"?"+pn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",hn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rn,_n].join("|"),"g"),bn=RegExp("[\\u200d\\ud800-\\udfff"+Xt+"\\ufe0e\\ufe0f]"),Nn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Tn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],En=-1,xn={};xn[ft]=xn[lt]=xn[ht]=xn[pt]=xn[gt]=xn[vt]=xn[dt]=xn[_t]=xn[mt]=!0,xn[W]=xn[F]=xn[st]=xn[q]=xn[ct]=xn[$]=xn[V]=xn[H]=xn[K]=xn[Z]=xn[Q]=xn[nt]=xn[et]=xn[rt]=xn[ut]=!1;var Ln={};Ln[W]=Ln[F]=Ln[st]=Ln[ct]=Ln[q]=Ln[$]=Ln[ft]=Ln[lt]=Ln[ht]=Ln[pt]=Ln[gt]=Ln[K]=Ln[Z]=Ln[Q]=Ln[nt]=Ln[et]=Ln[rt]=Ln[ot]=Ln[vt]=Ln[dt]=Ln[_t]=Ln[mt]=!0,Ln[V]=Ln[H]=Ln[ut]=!1;var Sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mn=parseFloat,Dn=parseInt,In="object"==typeof t&&t&&t.Object===Object&&t,kn="object"==typeof self&&self&&self.Object===Object&&self,Pn=In||kn||Function("return this")(),jn=n&&!n.nodeType&&n,Un=jn&&"object"==typeof r&&r&&!r.nodeType&&r,Rn=Un&&Un.exports===jn,zn=Rn&&In.process,Cn=function(){try{var t=Un&&Un.require&&Un.require("util").types;return t||zn&&zn.binding&&zn.binding("util")}catch(t){}}(),Bn=Cn&&Cn.isArrayBuffer,Wn=Cn&&Cn.isDate,Fn=Cn&&Cn.isMap,Gn=Cn&&Cn.isRegExp,qn=Cn&&Cn.isSet,$n=Cn&&Cn.isTypedArray;function Jn(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function Vn(t,n,e,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var u=t[o];n(r,u,e(u),t)}return r}function Hn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););return t}function Yn(t,n){for(var e=null==t?0:t.length;e--&&!1!==n(t[e],e,t););return t}function Kn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!n(t[e],e,t))return!1;return!0}function Zn(t,n){for(var e=-1,r=null==t?0:t.length,o=0,i=[];++e<r;){var u=t[e];n(u,e,t)&&(i[o++]=u)}return i}function Xn(t,n){return!!(null==t?0:t.length)&&se(t,n,0)>-1}function Qn(t,n,e){for(var r=-1,o=null==t?0:t.length;++r<o;)if(e(n,t[r]))return!0;return!1}function te(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function ne(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function ee(t,n,e,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(e=t[++o]);++o<i;)e=n(e,t[o],o,t);return e}function re(t,n,e,r){var o=null==t?0:t.length;for(r&&o&&(e=t[--o]);o--;)e=n(e,t[o],o,t);return e}function oe(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}var ie=he("length");function ue(t,n,e){var r;return e(t,function(t,e,o){if(n(t,e,o))return r=e,!1}),r}function ae(t,n,e,r){for(var o=t.length,i=e+(r?1:-1);r?i--:++i<o;)if(n(t[i],i,t))return i;return-1}function se(t,n,e){return n==n?function(t,n,e){var r=e-1,o=t.length;for(;++r<o;)if(t[r]===n)return r;return-1}(t,n,e):ae(t,fe,e)}function ce(t,n,e,r){for(var o=e-1,i=t.length;++o<i;)if(r(t[o],n))return o;return-1}function fe(t){return t!=t}function le(t,n){var e=null==t?0:t.length;return e?ve(t,n)/e:U}function he(t){return function(n){return null==n?i:n[t]}}function pe(t){return function(n){return null==t?i:t[n]}}function ge(t,n,e,r,o){return o(t,function(t,o,i){e=r?(r=!1,t):n(e,t,o,i)}),e}function ve(t,n){for(var e,r=-1,o=t.length;++r<o;){var u=n(t[r]);u!==i&&(e=e===i?u:e+u)}return e}function de(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function _e(t){return function(n){return t(n)}}function me(t,n){return te(n,function(n){return t[n]})}function we(t,n){return t.has(n)}function ye(t,n){for(var e=-1,r=t.length;++e<r&&se(n,t[e],0)>-1;);return e}function Oe(t,n){for(var e=t.length;e--&&se(n,t[e],0)>-1;);return e}var Ae=pe({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),be=pe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ne(t){return"\\"+Sn[t]}function Te(t){return bn.test(t)}function Ee(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function xe(t,n){return function(e){return t(n(e))}}function Le(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var u=t[e];u!==n&&u!==l||(t[e]=l,i[o++]=e)}return i}function Se(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function Me(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=[t,t]}),e}function De(t){return Te(t)?function(t){var n=On.lastIndex=0;for(;On.test(t);)++n;return n}(t):ie(t)}function Ie(t){return Te(t)?function(t){return t.match(On)||[]}(t):function(t){return t.split("")}(t)}var ke=pe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Pe=function t(n){var e,r=(n=null==n?Pn:Pe.defaults(Pn.Object(),n,Pe.pick(Pn,Tn))).Array,o=n.Date,Xt=n.Error,Qt=n.Function,tn=n.Math,nn=n.Object,en=n.RegExp,rn=n.String,on=n.TypeError,un=r.prototype,an=Qt.prototype,sn=nn.prototype,cn=n["__core-js_shared__"],fn=an.toString,ln=sn.hasOwnProperty,hn=0,pn=(e=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",gn=sn.toString,vn=fn.call(nn),dn=Pn._,_n=en("^"+fn.call(ln).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=Rn?n.Buffer:i,On=n.Symbol,bn=n.Uint8Array,Sn=mn?mn.allocUnsafe:i,In=xe(nn.getPrototypeOf,nn),kn=nn.create,jn=sn.propertyIsEnumerable,Un=un.splice,zn=On?On.isConcatSpreadable:i,Cn=On?On.iterator:i,ie=On?On.toStringTag:i,pe=function(){try{var t=Ci(nn,"defineProperty");return t({},"",{}),t}catch(t){}}(),je=n.clearTimeout!==Pn.clearTimeout&&n.clearTimeout,Ue=o&&o.now!==Pn.Date.now&&o.now,Re=n.setTimeout!==Pn.setTimeout&&n.setTimeout,ze=tn.ceil,Ce=tn.floor,Be=nn.getOwnPropertySymbols,We=mn?mn.isBuffer:i,Fe=n.isFinite,Ge=un.join,qe=xe(nn.keys,nn),$e=tn.max,Je=tn.min,Ve=o.now,He=n.parseInt,Ye=tn.random,Ke=un.reverse,Ze=Ci(n,"DataView"),Xe=Ci(n,"Map"),Qe=Ci(n,"Promise"),tr=Ci(n,"Set"),nr=Ci(n,"WeakMap"),er=Ci(nn,"create"),rr=nr&&new nr,or={},ir=lu(Ze),ur=lu(Xe),ar=lu(Qe),sr=lu(tr),cr=lu(nr),fr=On?On.prototype:i,lr=fr?fr.valueOf:i,hr=fr?fr.toString:i;function pr(t){if(La(t)&&!_a(t)&&!(t instanceof _r)){if(t instanceof dr)return t;if(ln.call(t,"__wrapped__"))return hu(t)}return new dr(t)}var gr=function(){function t(){}return function(n){if(!xa(n))return{};if(kn)return kn(n);t.prototype=n;var e=new t;return t.prototype=i,e}}();function vr(){}function dr(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}function _r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function mr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function wr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function yr(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Or(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new yr;++n<e;)this.add(t[n])}function Ar(t){var n=this.__data__=new wr(t);this.size=n.size}function br(t,n){var e=_a(t),r=!e&&da(t),o=!e&&!r&&Oa(t),i=!e&&!r&&!o&&Ua(t),u=e||r||o||i,a=u?de(t.length,rn):[],s=a.length;for(var c in t)!n&&!ln.call(t,c)||u&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ji(c,s))||a.push(c);return a}function Nr(t){var n=t.length;return n?t[Ao(0,n-1)]:i}function Tr(t,n){return su(ri(t),Pr(n,0,t.length))}function Er(t){return su(ri(t))}function xr(t,n,e){(e===i||pa(t[n],e))&&(e!==i||n in t)||Ir(t,n,e)}function Lr(t,n,e){var r=t[n];ln.call(t,n)&&pa(r,e)&&(e!==i||n in t)||Ir(t,n,e)}function Sr(t,n){for(var e=t.length;e--;)if(pa(t[e][0],n))return e;return-1}function Mr(t,n,e,r){return Cr(t,function(t,o,i){n(r,t,e(t),i)}),r}function Dr(t,n){return t&&oi(n,os(n),t)}function Ir(t,n,e){"__proto__"==n&&pe?pe(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function kr(t,n){for(var e=-1,o=n.length,u=r(o),a=null==t;++e<o;)u[e]=a?i:Qa(t,n[e]);return u}function Pr(t,n,e){return t==t&&(e!==i&&(t=t<=e?t:e),n!==i&&(t=t>=n?t:n)),t}function jr(t,n,e,r,o,u){var a,s=n&h,c=n&p,f=n&g;if(e&&(a=o?e(t,r,o,u):e(t)),a!==i)return a;if(!xa(t))return t;var l=_a(t);if(l){if(a=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&ln.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!s)return ri(t,a)}else{var v=Fi(t),d=v==H||v==Y;if(Oa(t))return Zo(t,s);if(v==Q||v==W||d&&!o){if(a=c||d?{}:qi(t),!s)return c?function(t,n){return oi(t,Wi(t),n)}(t,function(t,n){return t&&oi(n,is(n),t)}(a,t)):function(t,n){return oi(t,Bi(t),n)}(t,Dr(a,t))}else{if(!Ln[v])return o?t:{};a=function(t,n,e){var r,o,i,u=t.constructor;switch(n){case st:return Xo(t);case q:case $:return new u(+t);case ct:return function(t,n){var e=n?Xo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case ft:case lt:case ht:case pt:case gt:case vt:case dt:case _t:case mt:return Qo(t,e);case K:return new u;case Z:case rt:return new u(t);case nt:return(i=new(o=t).constructor(o.source,Gt.exec(o))).lastIndex=o.lastIndex,i;case et:return new u;case ot:return r=t,lr?nn(lr.call(r)):{}}}(t,v,s)}}u||(u=new Ar);var _=u.get(t);if(_)return _;if(u.set(t,a),ka(t))return t.forEach(function(r){a.add(jr(r,n,e,r,t,u))}),a;if(Sa(t))return t.forEach(function(r,o){a.set(o,jr(r,n,e,o,t,u))}),a;var m=l?i:(f?c?Ii:Di:c?is:os)(t);return Hn(m||t,function(r,o){m&&(r=t[o=r]),Lr(a,o,jr(r,n,e,o,t,u))}),a}function Ur(t,n,e){var r=e.length;if(null==t)return!r;for(t=nn(t);r--;){var o=e[r],u=n[o],a=t[o];if(a===i&&!(o in t)||!u(a))return!1}return!0}function Rr(t,n,e){if("function"!=typeof t)throw new on(s);return ou(function(){t.apply(i,e)},n)}function zr(t,n,e,r){var o=-1,i=Xn,a=!0,s=t.length,c=[],f=n.length;if(!s)return c;e&&(n=te(n,_e(e))),r?(i=Qn,a=!1):n.length>=u&&(i=we,a=!1,n=new Or(n));t:for(;++o<s;){var l=t[o],h=null==e?l:e(l);if(l=r||0!==l?l:0,a&&h==h){for(var p=f;p--;)if(n[p]===h)continue t;c.push(l)}else i(n,h,r)||c.push(l)}return c}pr.templateSettings={escape:Et,evaluate:xt,interpolate:Lt,variable:"",imports:{_:pr}},pr.prototype=vr.prototype,pr.prototype.constructor=pr,dr.prototype=gr(vr.prototype),dr.prototype.constructor=dr,_r.prototype=gr(vr.prototype),_r.prototype.constructor=_r,mr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},mr.prototype.delete=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},mr.prototype.get=function(t){var n=this.__data__;if(er){var e=n[t];return e===c?i:e}return ln.call(n,t)?n[t]:i},mr.prototype.has=function(t){var n=this.__data__;return er?n[t]!==i:ln.call(n,t)},mr.prototype.set=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=er&&n===i?c:n,this},wr.prototype.clear=function(){this.__data__=[],this.size=0},wr.prototype.delete=function(t){var n=this.__data__,e=Sr(n,t);return!(e<0||(e==n.length-1?n.pop():Un.call(n,e,1),--this.size,0))},wr.prototype.get=function(t){var n=this.__data__,e=Sr(n,t);return e<0?i:n[e][1]},wr.prototype.has=function(t){return Sr(this.__data__,t)>-1},wr.prototype.set=function(t,n){var e=this.__data__,r=Sr(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this},yr.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Xe||wr),string:new mr}},yr.prototype.delete=function(t){var n=Ri(this,t).delete(t);return this.size-=n?1:0,n},yr.prototype.get=function(t){return Ri(this,t).get(t)},yr.prototype.has=function(t){return Ri(this,t).has(t)},yr.prototype.set=function(t,n){var e=Ri(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this},Or.prototype.add=Or.prototype.push=function(t){return this.__data__.set(t,c),this},Or.prototype.has=function(t){return this.__data__.has(t)},Ar.prototype.clear=function(){this.__data__=new wr,this.size=0},Ar.prototype.delete=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},Ar.prototype.get=function(t){return this.__data__.get(t)},Ar.prototype.has=function(t){return this.__data__.has(t)},Ar.prototype.set=function(t,n){var e=this.__data__;if(e instanceof wr){var r=e.__data__;if(!Xe||r.length<u-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new yr(r)}return e.set(t,n),this.size=e.size,this};var Cr=ai(Vr),Br=ai(Hr,!0);function Wr(t,n){var e=!0;return Cr(t,function(t,r,o){return e=!!n(t,r,o)}),e}function Fr(t,n,e){for(var r=-1,o=t.length;++r<o;){var u=t[r],a=n(u);if(null!=a&&(s===i?a==a&&!ja(a):e(a,s)))var s=a,c=u}return c}function Gr(t,n){var e=[];return Cr(t,function(t,r,o){n(t,r,o)&&e.push(t)}),e}function qr(t,n,e,r,o){var i=-1,u=t.length;for(e||(e=$i),o||(o=[]);++i<u;){var a=t[i];n>0&&e(a)?n>1?qr(a,n-1,e,r,o):ne(o,a):r||(o[o.length]=a)}return o}var $r=si(),Jr=si(!0);function Vr(t,n){return t&&$r(t,n,os)}function Hr(t,n){return t&&Jr(t,n,os)}function Yr(t,n){return Zn(n,function(n){return Na(t[n])})}function Kr(t,n){for(var e=0,r=(n=Vo(n,t)).length;null!=t&&e<r;)t=t[fu(n[e++])];return e&&e==r?t:i}function Zr(t,n,e){var r=n(t);return _a(t)?r:ne(r,e(t))}function Xr(t){return null==t?t===i?it:X:ie&&ie in nn(t)?function(t){var n=ln.call(t,ie),e=t[ie];try{t[ie]=i;var r=!0}catch(t){}var o=gn.call(t);return r&&(n?t[ie]=e:delete t[ie]),o}(t):function(t){return gn.call(t)}(t)}function Qr(t,n){return t>n}function to(t,n){return null!=t&&ln.call(t,n)}function no(t,n){return null!=t&&n in nn(t)}function eo(t,n,e){for(var o=e?Qn:Xn,u=t[0].length,a=t.length,s=a,c=r(a),f=1/0,l=[];s--;){var h=t[s];s&&n&&(h=te(h,_e(n))),f=Je(h.length,f),c[s]=!e&&(n||u>=120&&h.length>=120)?new Or(s&&h):i}h=t[0];var p=-1,g=c[0];t:for(;++p<u&&l.length<f;){var v=h[p],d=n?n(v):v;if(v=e||0!==v?v:0,!(g?we(g,d):o(l,d,e))){for(s=a;--s;){var _=c[s];if(!(_?we(_,d):o(t[s],d,e)))continue t}g&&g.push(d),l.push(v)}}return l}function ro(t,n,e){var r=null==(t=nu(t,n=Vo(n,t)))?t:t[fu(bu(n))];return null==r?i:Jn(r,t,e)}function oo(t){return La(t)&&Xr(t)==W}function io(t,n,e,r,o){return t===n||(null==t||null==n||!La(t)&&!La(n)?t!=t&&n!=n:function(t,n,e,r,o,u){var a=_a(t),s=_a(n),c=a?F:Fi(t),f=s?F:Fi(n),l=(c=c==W?Q:c)==Q,h=(f=f==W?Q:f)==Q,p=c==f;if(p&&Oa(t)){if(!Oa(n))return!1;a=!0,l=!1}if(p&&!l)return u||(u=new Ar),a||Ua(t)?Si(t,n,e,r,o,u):function(t,n,e,r,o,i,u){switch(e){case ct:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case st:return!(t.byteLength!=n.byteLength||!i(new bn(t),new bn(n)));case q:case $:case Z:return pa(+t,+n);case V:return t.name==n.name&&t.message==n.message;case nt:case rt:return t==n+"";case K:var a=Ee;case et:var s=r&v;if(a||(a=Se),t.size!=n.size&&!s)return!1;var c=u.get(t);if(c)return c==n;r|=d,u.set(t,n);var f=Si(a(t),a(n),r,o,i,u);return u.delete(t),f;case ot:if(lr)return lr.call(t)==lr.call(n)}return!1}(t,n,c,e,r,o,u);if(!(e&v)){var g=l&&ln.call(t,"__wrapped__"),_=h&&ln.call(n,"__wrapped__");if(g||_){var m=g?t.value():t,w=_?n.value():n;return u||(u=new Ar),o(m,w,e,r,u)}}return!!p&&(u||(u=new Ar),function(t,n,e,r,o,u){var a=e&v,s=Di(t),c=s.length,f=Di(n).length;if(c!=f&&!a)return!1;for(var l=c;l--;){var h=s[l];if(!(a?h in n:ln.call(n,h)))return!1}var p=u.get(t);if(p&&u.get(n))return p==n;var g=!0;u.set(t,n),u.set(n,t);for(var d=a;++l<c;){h=s[l];var _=t[h],m=n[h];if(r)var w=a?r(m,_,h,n,t,u):r(_,m,h,t,n,u);if(!(w===i?_===m||o(_,m,e,r,u):w)){g=!1;break}d||(d="constructor"==h)}if(g&&!d){var y=t.constructor,O=n.constructor;y!=O&&"constructor"in t&&"constructor"in n&&!("function"==typeof y&&y instanceof y&&"function"==typeof O&&O instanceof O)&&(g=!1)}return u.delete(t),u.delete(n),g}(t,n,e,r,o,u))}(t,n,e,r,io,o))}function uo(t,n,e,r){var o=e.length,u=o,a=!r;if(null==t)return!u;for(t=nn(t);o--;){var s=e[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<u;){var c=(s=e[o])[0],f=t[c],l=s[1];if(a&&s[2]){if(f===i&&!(c in t))return!1}else{var h=new Ar;if(r)var p=r(f,l,c,t,n,h);if(!(p===i?io(l,f,v|d,r,h):p))return!1}}return!0}function ao(t){return!(!xa(t)||(n=t,pn&&pn in n))&&(Na(t)?_n:Jt).test(lu(t));var n}function so(t){return"function"==typeof t?t:null==t?Ms:"object"==typeof t?_a(t)?go(t[0],t[1]):po(t):Cs(t)}function co(t){if(!Zi(t))return qe(t);var n=[];for(var e in nn(t))ln.call(t,e)&&"constructor"!=e&&n.push(e);return n}function fo(t){if(!xa(t))return function(t){var n=[];if(null!=t)for(var e in nn(t))n.push(e);return n}(t);var n=Zi(t),e=[];for(var r in t)("constructor"!=r||!n&&ln.call(t,r))&&e.push(r);return e}function lo(t,n){return t<n}function ho(t,n){var e=-1,o=wa(t)?r(t.length):[];return Cr(t,function(t,r,i){o[++e]=n(t,r,i)}),o}function po(t){var n=zi(t);return 1==n.length&&n[0][2]?Qi(n[0][0],n[0][1]):function(e){return e===t||uo(e,t,n)}}function go(t,n){return Hi(t)&&Xi(n)?Qi(fu(t),n):function(e){var r=Qa(e,t);return r===i&&r===n?ts(e,t):io(n,r,v|d)}}function vo(t,n,e,r,o){t!==n&&$r(n,function(u,a){if(xa(u))o||(o=new Ar),function(t,n,e,r,o,u,a){var s=eu(t,e),c=eu(n,e),f=a.get(c);if(f)xr(t,e,f);else{var l=u?u(s,c,e+"",t,n,a):i,h=l===i;if(h){var p=_a(c),g=!p&&Oa(c),v=!p&&!g&&Ua(c);l=c,p||g||v?_a(s)?l=s:ya(s)?l=ri(s):g?(h=!1,l=Zo(c,!0)):v?(h=!1,l=Qo(c,!0)):l=[]:Da(c)||da(c)?(l=s,da(s)?l=qa(s):xa(s)&&!Na(s)||(l=qi(c))):h=!1}h&&(a.set(c,l),o(l,c,r,u,a),a.delete(c)),xr(t,e,l)}}(t,n,a,e,vo,r,o);else{var s=r?r(eu(t,a),u,a+"",t,n,o):i;s===i&&(s=u),xr(t,a,s)}},is)}function _o(t,n){var e=t.length;if(e)return Ji(n+=n<0?e:0,e)?t[n]:i}function mo(t,n,e){var r=-1;return n=te(n.length?n:[Ms],_e(Ui())),function(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t}(ho(t,function(t,e,o){return{criteria:te(n,function(n){return n(t)}),index:++r,value:t}}),function(t,n){return function(t,n,e){for(var r=-1,o=t.criteria,i=n.criteria,u=o.length,a=e.length;++r<u;){var s=ti(o[r],i[r]);if(s){if(r>=a)return s;var c=e[r];return s*("desc"==c?-1:1)}}return t.index-n.index}(t,n,e)})}function wo(t,n,e){for(var r=-1,o=n.length,i={};++r<o;){var u=n[r],a=Kr(t,u);e(a,u)&&xo(i,Vo(u,t),a)}return i}function yo(t,n,e,r){var o=r?ce:se,i=-1,u=n.length,a=t;for(t===n&&(n=ri(n)),e&&(a=te(t,_e(e)));++i<u;)for(var s=0,c=n[i],f=e?e(c):c;(s=o(a,f,s,r))>-1;)a!==t&&Un.call(a,s,1),Un.call(t,s,1);return t}function Oo(t,n){for(var e=t?n.length:0,r=e-1;e--;){var o=n[e];if(e==r||o!==i){var i=o;Ji(o)?Un.call(t,o,1):Co(t,o)}}return t}function Ao(t,n){return t+Ce(Ye()*(n-t+1))}function bo(t,n){var e="";if(!t||n<1||n>P)return e;do{n%2&&(e+=t),(n=Ce(n/2))&&(t+=t)}while(n);return e}function No(t,n){return iu(tu(t,n,Ms),t+"")}function To(t){return Nr(ps(t))}function Eo(t,n){var e=ps(t);return su(e,Pr(n,0,e.length))}function xo(t,n,e,r){if(!xa(t))return t;for(var o=-1,u=(n=Vo(n,t)).length,a=u-1,s=t;null!=s&&++o<u;){var c=fu(n[o]),f=e;if(o!=a){var l=s[c];(f=r?r(l,c,s):i)===i&&(f=xa(l)?l:Ji(n[o+1])?[]:{})}Lr(s,c,f),s=s[c]}return t}var Lo=rr?function(t,n){return rr.set(t,n),t}:Ms,So=pe?function(t,n){return pe(t,"toString",{configurable:!0,enumerable:!1,value:xs(n),writable:!0})}:Ms;function Mo(t){return su(ps(t))}function Do(t,n,e){var o=-1,i=t.length;n<0&&(n=-n>i?0:i+n),(e=e>i?i:e)<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var u=r(i);++o<i;)u[o]=t[o+n];return u}function Io(t,n){var e;return Cr(t,function(t,r,o){return!(e=n(t,r,o))}),!!e}function ko(t,n,e){var r=0,o=null==t?r:t.length;if("number"==typeof n&&n==n&&o<=C){for(;r<o;){var i=r+o>>>1,u=t[i];null!==u&&!ja(u)&&(e?u<=n:u<n)?r=i+1:o=i}return o}return Po(t,n,Ms,e)}function Po(t,n,e,r){n=e(n);for(var o=0,u=null==t?0:t.length,a=n!=n,s=null===n,c=ja(n),f=n===i;o<u;){var l=Ce((o+u)/2),h=e(t[l]),p=h!==i,g=null===h,v=h==h,d=ja(h);if(a)var _=r||v;else _=f?v&&(r||p):s?v&&p&&(r||!g):c?v&&p&&!g&&(r||!d):!g&&!d&&(r?h<=n:h<n);_?o=l+1:u=l}return Je(u,z)}function jo(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var u=t[e],a=n?n(u):u;if(!e||!pa(a,s)){var s=a;i[o++]=0===u?0:u}}return i}function Uo(t){return"number"==typeof t?t:ja(t)?U:+t}function Ro(t){if("string"==typeof t)return t;if(_a(t))return te(t,Ro)+"";if(ja(t))return hr?hr.call(t):"";var n=t+"";return"0"==n&&1/t==-k?"-0":n}function zo(t,n,e){var r=-1,o=Xn,i=t.length,a=!0,s=[],c=s;if(e)a=!1,o=Qn;else if(i>=u){var f=n?null:bi(t);if(f)return Se(f);a=!1,o=we,c=new Or}else c=n?[]:s;t:for(;++r<i;){var l=t[r],h=n?n(l):l;if(l=e||0!==l?l:0,a&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;n&&c.push(h),s.push(l)}else o(c,h,e)||(c!==s&&c.push(h),s.push(l))}return s}function Co(t,n){return null==(t=nu(t,n=Vo(n,t)))||delete t[fu(bu(n))]}function Bo(t,n,e,r){return xo(t,n,e(Kr(t,n)),r)}function Wo(t,n,e,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&n(t[i],i,t););return e?Do(t,r?0:i,r?i+1:o):Do(t,r?i+1:0,r?o:i)}function Fo(t,n){var e=t;return e instanceof _r&&(e=e.value()),ee(n,function(t,n){return n.func.apply(n.thisArg,ne([t],n.args))},e)}function Go(t,n,e){var o=t.length;if(o<2)return o?zo(t[0]):[];for(var i=-1,u=r(o);++i<o;)for(var a=t[i],s=-1;++s<o;)s!=i&&(u[i]=zr(u[i]||a,t[s],n,e));return zo(qr(u,1),n,e)}function qo(t,n,e){for(var r=-1,o=t.length,u=n.length,a={};++r<o;){var s=r<u?n[r]:i;e(a,t[r],s)}return a}function $o(t){return ya(t)?t:[]}function Jo(t){return"function"==typeof t?t:Ms}function Vo(t,n){return _a(t)?t:Hi(t,n)?[t]:cu($a(t))}var Ho=No;function Yo(t,n,e){var r=t.length;return e=e===i?r:e,!n&&e>=r?t:Do(t,n,e)}var Ko=je||function(t){return Pn.clearTimeout(t)};function Zo(t,n){if(n)return t.slice();var e=t.length,r=Sn?Sn(e):new t.constructor(e);return t.copy(r),r}function Xo(t){var n=new t.constructor(t.byteLength);return new bn(n).set(new bn(t)),n}function Qo(t,n){var e=n?Xo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ti(t,n){if(t!==n){var e=t!==i,r=null===t,o=t==t,u=ja(t),a=n!==i,s=null===n,c=n==n,f=ja(n);if(!s&&!f&&!u&&t>n||u&&a&&c&&!s&&!f||r&&a&&c||!e&&c||!o)return 1;if(!r&&!u&&!f&&t<n||f&&e&&o&&!r&&!u||s&&e&&o||!a&&o||!c)return-1}return 0}function ni(t,n,e,o){for(var i=-1,u=t.length,a=e.length,s=-1,c=n.length,f=$e(u-a,0),l=r(c+f),h=!o;++s<c;)l[s]=n[s];for(;++i<a;)(h||i<u)&&(l[e[i]]=t[i]);for(;f--;)l[s++]=t[i++];return l}function ei(t,n,e,o){for(var i=-1,u=t.length,a=-1,s=e.length,c=-1,f=n.length,l=$e(u-s,0),h=r(l+f),p=!o;++i<l;)h[i]=t[i];for(var g=i;++c<f;)h[g+c]=n[c];for(;++a<s;)(p||i<u)&&(h[g+e[a]]=t[i++]);return h}function ri(t,n){var e=-1,o=t.length;for(n||(n=r(o));++e<o;)n[e]=t[e];return n}function oi(t,n,e,r){var o=!e;e||(e={});for(var u=-1,a=n.length;++u<a;){var s=n[u],c=r?r(e[s],t[s],s,e,t):i;c===i&&(c=t[s]),o?Ir(e,s,c):Lr(e,s,c)}return e}function ii(t,n){return function(e,r){var o=_a(e)?Vn:Mr,i=n?n():{};return o(e,t,Ui(r,2),i)}}function ui(t){return No(function(n,e){var r=-1,o=e.length,u=o>1?e[o-1]:i,a=o>2?e[2]:i;for(u=t.length>3&&"function"==typeof u?(o--,u):i,a&&Vi(e[0],e[1],a)&&(u=o<3?i:u,o=1),n=nn(n);++r<o;){var s=e[r];s&&t(n,s,r,u)}return n})}function ai(t,n){return function(e,r){if(null==e)return e;if(!wa(e))return t(e,r);for(var o=e.length,i=n?o:-1,u=nn(e);(n?i--:++i<o)&&!1!==r(u[i],i,u););return e}}function si(t){return function(n,e,r){for(var o=-1,i=nn(n),u=r(n),a=u.length;a--;){var s=u[t?a:++o];if(!1===e(i[s],s,i))break}return n}}function ci(t){return function(n){var e=Te(n=$a(n))?Ie(n):i,r=e?e[0]:n.charAt(0),o=e?Yo(e,1).join(""):n.slice(1);return r[t]()+o}}function fi(t){return function(n){return ee(Ns(ds(n).replace(wn,"")),t,"")}}function li(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=gr(t.prototype),r=t.apply(e,n);return xa(r)?r:e}}function hi(t){return function(n,e,r){var o=nn(n);if(!wa(n)){var u=Ui(e,3);n=os(n),e=function(t){return u(o[t],t,o)}}var a=t(n,e,r);return a>-1?o[u?n[a]:a]:i}}function pi(t){return Mi(function(n){var e=n.length,r=e,o=dr.prototype.thru;for(t&&n.reverse();r--;){var u=n[r];if("function"!=typeof u)throw new on(s);if(o&&!a&&"wrapper"==Pi(u))var a=new dr([],!0)}for(r=a?r:e;++r<e;){var c=Pi(u=n[r]),f="wrapper"==c?ki(u):i;a=f&&Yi(f[0])&&f[1]==(N|y|A|T)&&!f[4].length&&1==f[9]?a[Pi(f[0])].apply(a,f[3]):1==u.length&&Yi(u)?a[c]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&_a(r))return a.plant(r).value();for(var o=0,i=e?n[o].apply(this,t):r;++o<e;)i=n[o].call(this,i);return i}})}function gi(t,n,e,o,u,a,s,c,f,l){var h=n&N,p=n&_,g=n&m,v=n&(y|O),d=n&E,w=g?i:li(t);return function _(){for(var m=arguments.length,y=r(m),O=m;O--;)y[O]=arguments[O];if(v)var A=ji(_),b=function(t,n){for(var e=t.length,r=0;e--;)t[e]===n&&++r;return r}(y,A);if(o&&(y=ni(y,o,u,v)),a&&(y=ei(y,a,s,v)),m-=b,v&&m<l){var N=Le(y,A);return Oi(t,n,gi,_.placeholder,e,y,N,c,f,l-m)}var T=p?e:this,E=g?T[t]:t;return m=y.length,c?y=function(t,n){for(var e=t.length,r=Je(n.length,e),o=ri(t);r--;){var u=n[r];t[r]=Ji(u,e)?o[u]:i}return t}(y,c):d&&m>1&&y.reverse(),h&&f<m&&(y.length=f),this&&this!==Pn&&this instanceof _&&(E=w||li(E)),E.apply(T,y)}}function vi(t,n){return function(e,r){return function(t,n,e,r){return Vr(t,function(t,o,i){n(r,e(t),o,i)}),r}(e,t,n(r),{})}}function di(t,n){return function(e,r){var o;if(e===i&&r===i)return n;if(e!==i&&(o=e),r!==i){if(o===i)return r;"string"==typeof e||"string"==typeof r?(e=Ro(e),r=Ro(r)):(e=Uo(e),r=Uo(r)),o=t(e,r)}return o}}function _i(t){return Mi(function(n){return n=te(n,_e(Ui())),No(function(e){var r=this;return t(n,function(t){return Jn(t,r,e)})})})}function mi(t,n){var e=(n=n===i?" ":Ro(n)).length;if(e<2)return e?bo(n,t):n;var r=bo(n,ze(t/De(n)));return Te(n)?Yo(Ie(r),0,t).join(""):r.slice(0,t)}function wi(t){return function(n,e,o){return o&&"number"!=typeof o&&Vi(n,e,o)&&(e=o=i),n=Ba(n),e===i?(e=n,n=0):e=Ba(e),function(t,n,e,o){for(var i=-1,u=$e(ze((n-t)/(e||1)),0),a=r(u);u--;)a[o?u:++i]=t,t+=e;return a}(n,e,o=o===i?n<e?1:-1:Ba(o),t)}}function yi(t){return function(n,e){return"string"==typeof n&&"string"==typeof e||(n=Ga(n),e=Ga(e)),t(n,e)}}function Oi(t,n,e,r,o,u,a,s,c,f){var l=n&y;n|=l?A:b,(n&=~(l?b:A))&w||(n&=~(_|m));var h=[t,n,o,l?u:i,l?a:i,l?i:u,l?i:a,s,c,f],p=e.apply(i,h);return Yi(t)&&ru(p,h),p.placeholder=r,uu(p,t,n)}function Ai(t){var n=tn[t];return function(t,e){if(t=Ga(t),e=null==e?0:Je(Wa(e),292)){var r=($a(t)+"e").split("e");return+((r=($a(n(r[0]+"e"+(+r[1]+e)))+"e").split("e"))[0]+"e"+(+r[1]-e))}return n(t)}}var bi=tr&&1/Se(new tr([,-0]))[1]==k?function(t){return new tr(t)}:js;function Ni(t){return function(n){var e=Fi(n);return e==K?Ee(n):e==et?Me(n):function(t,n){return te(n,function(n){return[n,t[n]]})}(n,t(n))}}function Ti(t,n,e,o,u,a,c,f){var h=n&m;if(!h&&"function"!=typeof t)throw new on(s);var p=o?o.length:0;if(p||(n&=~(A|b),o=u=i),c=c===i?c:$e(Wa(c),0),f=f===i?f:Wa(f),p-=u?u.length:0,n&b){var g=o,v=u;o=u=i}var d=h?i:ki(t),E=[t,n,e,o,u,g,v,a,c,f];if(d&&function(t,n){var e=t[1],r=n[1],o=e|r,i=o<(_|m|N),u=r==N&&e==y||r==N&&e==T&&t[7].length<=n[8]||r==(N|T)&&n[7].length<=n[8]&&e==y;if(!i&&!u)return t;r&_&&(t[2]=n[2],o|=e&_?0:w);var a=n[3];if(a){var s=t[3];t[3]=s?ni(s,a,n[4]):a,t[4]=s?Le(t[3],l):n[4]}(a=n[5])&&(s=t[5],t[5]=s?ei(s,a,n[6]):a,t[6]=s?Le(t[5],l):n[6]),(a=n[7])&&(t[7]=a),r&N&&(t[8]=null==t[8]?n[8]:Je(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=o}(E,d),t=E[0],n=E[1],e=E[2],o=E[3],u=E[4],!(f=E[9]=E[9]===i?h?0:t.length:$e(E[9]-p,0))&&n&(y|O)&&(n&=~(y|O)),n&&n!=_)x=n==y||n==O?function(t,n,e){var o=li(t);return function u(){for(var a=arguments.length,s=r(a),c=a,f=ji(u);c--;)s[c]=arguments[c];var l=a<3&&s[0]!==f&&s[a-1]!==f?[]:Le(s,f);return(a-=l.length)<e?Oi(t,n,gi,u.placeholder,i,s,l,i,i,e-a):Jn(this&&this!==Pn&&this instanceof u?o:t,this,s)}}(t,n,f):n!=A&&n!=(_|A)||u.length?gi.apply(i,E):function(t,n,e,o){var i=n&_,u=li(t);return function n(){for(var a=-1,s=arguments.length,c=-1,f=o.length,l=r(f+s),h=this&&this!==Pn&&this instanceof n?u:t;++c<f;)l[c]=o[c];for(;s--;)l[c++]=arguments[++a];return Jn(h,i?e:this,l)}}(t,n,e,o);else var x=function(t,n,e){var r=n&_,o=li(t);return function n(){return(this&&this!==Pn&&this instanceof n?o:t).apply(r?e:this,arguments)}}(t,n,e);return uu((d?Lo:ru)(x,E),t,n)}function Ei(t,n,e,r){return t===i||pa(t,sn[e])&&!ln.call(r,e)?n:t}function xi(t,n,e,r,o,u){return xa(t)&&xa(n)&&(u.set(n,t),vo(t,n,i,xi,u),u.delete(n)),t}function Li(t){return Da(t)?i:t}function Si(t,n,e,r,o,u){var a=e&v,s=t.length,c=n.length;if(s!=c&&!(a&&c>s))return!1;var f=u.get(t);if(f&&u.get(n))return f==n;var l=-1,h=!0,p=e&d?new Or:i;for(u.set(t,n),u.set(n,t);++l<s;){var g=t[l],_=n[l];if(r)var m=a?r(_,g,l,n,t,u):r(g,_,l,t,n,u);if(m!==i){if(m)continue;h=!1;break}if(p){if(!oe(n,function(t,n){if(!we(p,n)&&(g===t||o(g,t,e,r,u)))return p.push(n)})){h=!1;break}}else if(g!==_&&!o(g,_,e,r,u)){h=!1;break}}return u.delete(t),u.delete(n),h}function Mi(t){return iu(tu(t,i,mu),t+"")}function Di(t){return Zr(t,os,Bi)}function Ii(t){return Zr(t,is,Wi)}var ki=rr?function(t){return rr.get(t)}:js;function Pi(t){for(var n=t.name+"",e=or[n],r=ln.call(or,n)?e.length:0;r--;){var o=e[r],i=o.func;if(null==i||i==t)return o.name}return n}function ji(t){return(ln.call(pr,"placeholder")?pr:t).placeholder}function Ui(){var t=pr.iteratee||Ds;return t=t===Ds?so:t,arguments.length?t(arguments[0],arguments[1]):t}function Ri(t,n){var e,r,o=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?o["string"==typeof n?"string":"hash"]:o.map}function zi(t){for(var n=os(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,Xi(o)]}return n}function Ci(t,n){var e=function(t,n){return null==t?i:t[n]}(t,n);return ao(e)?e:i}var Bi=Be?function(t){return null==t?[]:(t=nn(t),Zn(Be(t),function(n){return jn.call(t,n)}))}:Fs,Wi=Be?function(t){for(var n=[];t;)ne(n,Bi(t)),t=In(t);return n}:Fs,Fi=Xr;function Gi(t,n,e){for(var r=-1,o=(n=Vo(n,t)).length,i=!1;++r<o;){var u=fu(n[r]);if(!(i=null!=t&&e(t,u)))break;t=t[u]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Ea(o)&&Ji(u,o)&&(_a(t)||da(t))}function qi(t){return"function"!=typeof t.constructor||Zi(t)?{}:gr(In(t))}function $i(t){return _a(t)||da(t)||!!(zn&&t&&t[zn])}function Ji(t,n){var e=typeof t;return!!(n=null==n?P:n)&&("number"==e||"symbol"!=e&&Ht.test(t))&&t>-1&&t%1==0&&t<n}function Vi(t,n,e){if(!xa(e))return!1;var r=typeof n;return!!("number"==r?wa(e)&&Ji(n,e.length):"string"==r&&n in e)&&pa(e[n],t)}function Hi(t,n){if(_a(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!ja(t))||Mt.test(t)||!St.test(t)||null!=n&&t in nn(n)}function Yi(t){var n=Pi(t),e=pr[n];if("function"!=typeof e||!(n in _r.prototype))return!1;if(t===e)return!0;var r=ki(e);return!!r&&t===r[0]}(Ze&&Fi(new Ze(new ArrayBuffer(1)))!=ct||Xe&&Fi(new Xe)!=K||Qe&&"[object Promise]"!=Fi(Qe.resolve())||tr&&Fi(new tr)!=et||nr&&Fi(new nr)!=ut)&&(Fi=function(t){var n=Xr(t),e=n==Q?t.constructor:i,r=e?lu(e):"";if(r)switch(r){case ir:return ct;case ur:return K;case ar:return"[object Promise]";case sr:return et;case cr:return ut}return n});var Ki=cn?Na:Gs;function Zi(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||sn)}function Xi(t){return t==t&&!xa(t)}function Qi(t,n){return function(e){return null!=e&&e[t]===n&&(n!==i||t in nn(e))}}function tu(t,n,e){return n=$e(n===i?t.length-1:n,0),function(){for(var o=arguments,i=-1,u=$e(o.length-n,0),a=r(u);++i<u;)a[i]=o[n+i];i=-1;for(var s=r(n+1);++i<n;)s[i]=o[i];return s[n]=e(a),Jn(t,this,s)}}function nu(t,n){return n.length<2?t:Kr(t,Do(n,0,-1))}function eu(t,n){if("__proto__"!=n)return t[n]}var ru=au(Lo),ou=Re||function(t,n){return Pn.setTimeout(t,n)},iu=au(So);function uu(t,n,e){var r=n+"";return iu(t,function(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(Rt,"{\n/* [wrapped with "+n+"] */\n")}(r,function(t,n){return Hn(B,function(e){var r="_."+e[0];n&e[1]&&!Xn(t,r)&&t.push(r)}),t.sort()}(function(t){var n=t.match(zt);return n?n[1].split(Ct):[]}(r),e)))}function au(t){var n=0,e=0;return function(){var r=Ve(),o=M-(r-e);if(e=r,o>0){if(++n>=S)return arguments[0]}else n=0;return t.apply(i,arguments)}}function su(t,n){var e=-1,r=t.length,o=r-1;for(n=n===i?r:n;++e<n;){var u=Ao(e,o),a=t[u];t[u]=t[e],t[e]=a}return t.length=n,t}var cu=function(t){var n=aa(t,function(t){return e.size===f&&e.clear(),t}),e=n.cache;return n}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Dt,function(t,e,r,o){n.push(r?o.replace(Wt,"$1"):e||t)}),n});function fu(t){if("string"==typeof t||ja(t))return t;var n=t+"";return"0"==n&&1/t==-k?"-0":n}function lu(t){if(null!=t){try{return fn.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function hu(t){if(t instanceof _r)return t.clone();var n=new dr(t.__wrapped__,t.__chain__);return n.__actions__=ri(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var pu=No(function(t,n){return ya(t)?zr(t,qr(n,1,ya,!0)):[]}),gu=No(function(t,n){var e=bu(n);return ya(e)&&(e=i),ya(t)?zr(t,qr(n,1,ya,!0),Ui(e,2)):[]}),vu=No(function(t,n){var e=bu(n);return ya(e)&&(e=i),ya(t)?zr(t,qr(n,1,ya,!0),i,e):[]});function du(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:Wa(e);return o<0&&(o=$e(r+o,0)),ae(t,Ui(n,3),o)}function _u(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return e!==i&&(o=Wa(e),o=e<0?$e(r+o,0):Je(o,r-1)),ae(t,Ui(n,3),o,!0)}function mu(t){return null!=t&&t.length?qr(t,1):[]}function wu(t){return t&&t.length?t[0]:i}var yu=No(function(t){var n=te(t,$o);return n.length&&n[0]===t[0]?eo(n):[]}),Ou=No(function(t){var n=bu(t),e=te(t,$o);return n===bu(e)?n=i:e.pop(),e.length&&e[0]===t[0]?eo(e,Ui(n,2)):[]}),Au=No(function(t){var n=bu(t),e=te(t,$o);return(n="function"==typeof n?n:i)&&e.pop(),e.length&&e[0]===t[0]?eo(e,i,n):[]});function bu(t){var n=null==t?0:t.length;return n?t[n-1]:i}var Nu=No(Tu);function Tu(t,n){return t&&t.length&&n&&n.length?yo(t,n):t}var Eu=Mi(function(t,n){var e=null==t?0:t.length,r=kr(t,n);return Oo(t,te(n,function(t){return Ji(t,e)?+t:t}).sort(ti)),r});function xu(t){return null==t?t:Ke.call(t)}var Lu=No(function(t){return zo(qr(t,1,ya,!0))}),Su=No(function(t){var n=bu(t);return ya(n)&&(n=i),zo(qr(t,1,ya,!0),Ui(n,2))}),Mu=No(function(t){var n=bu(t);return n="function"==typeof n?n:i,zo(qr(t,1,ya,!0),i,n)});function Du(t){if(!t||!t.length)return[];var n=0;return t=Zn(t,function(t){if(ya(t))return n=$e(t.length,n),!0}),de(n,function(n){return te(t,he(n))})}function Iu(t,n){if(!t||!t.length)return[];var e=Du(t);return null==n?e:te(e,function(t){return Jn(n,i,t)})}var ku=No(function(t,n){return ya(t)?zr(t,n):[]}),Pu=No(function(t){return Go(Zn(t,ya))}),ju=No(function(t){var n=bu(t);return ya(n)&&(n=i),Go(Zn(t,ya),Ui(n,2))}),Uu=No(function(t){var n=bu(t);return n="function"==typeof n?n:i,Go(Zn(t,ya),i,n)}),Ru=No(Du);var zu=No(function(t){var n=t.length,e=n>1?t[n-1]:i;return e="function"==typeof e?(t.pop(),e):i,Iu(t,e)});function Cu(t){var n=pr(t);return n.__chain__=!0,n}function Bu(t,n){return n(t)}var Wu=Mi(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,o=function(n){return kr(n,t)};return!(n>1||this.__actions__.length)&&r instanceof _r&&Ji(e)?((r=r.slice(e,+e+(n?1:0))).__actions__.push({func:Bu,args:[o],thisArg:i}),new dr(r,this.__chain__).thru(function(t){return n&&!t.length&&t.push(i),t})):this.thru(o)});var Fu=ii(function(t,n,e){ln.call(t,e)?++t[e]:Ir(t,e,1)});var Gu=hi(du),qu=hi(_u);function $u(t,n){return(_a(t)?Hn:Cr)(t,Ui(n,3))}function Ju(t,n){return(_a(t)?Yn:Br)(t,Ui(n,3))}var Vu=ii(function(t,n,e){ln.call(t,e)?t[e].push(n):Ir(t,e,[n])});var Hu=No(function(t,n,e){var o=-1,i="function"==typeof n,u=wa(t)?r(t.length):[];return Cr(t,function(t){u[++o]=i?Jn(n,t,e):ro(t,n,e)}),u}),Yu=ii(function(t,n,e){Ir(t,e,n)});function Ku(t,n){return(_a(t)?te:ho)(t,Ui(n,3))}var Zu=ii(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]});var Xu=No(function(t,n){if(null==t)return[];var e=n.length;return e>1&&Vi(t,n[0],n[1])?n=[]:e>2&&Vi(n[0],n[1],n[2])&&(n=[n[0]]),mo(t,qr(n,1),[])}),Qu=Ue||function(){return Pn.Date.now()};function ta(t,n,e){return n=e?i:n,n=t&&null==n?t.length:n,Ti(t,N,i,i,i,i,n)}function na(t,n){var e;if("function"!=typeof n)throw new on(s);return t=Wa(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=i),e}}var ea=No(function(t,n,e){var r=_;if(e.length){var o=Le(e,ji(ea));r|=A}return Ti(t,r,n,e,o)}),ra=No(function(t,n,e){var r=_|m;if(e.length){var o=Le(e,ji(ra));r|=A}return Ti(n,r,t,e,o)});function oa(t,n,e){var r,o,u,a,c,f,l=0,h=!1,p=!1,g=!0;if("function"!=typeof t)throw new on(s);function v(n){var e=r,u=o;return r=o=i,l=n,a=t.apply(u,e)}function d(t){var e=t-f;return f===i||e>=n||e<0||p&&t-l>=u}function _(){var t=Qu();if(d(t))return m(t);c=ou(_,function(t){var e=n-(t-f);return p?Je(e,u-(t-l)):e}(t))}function m(t){return c=i,g&&r?v(t):(r=o=i,a)}function w(){var t=Qu(),e=d(t);if(r=arguments,o=this,f=t,e){if(c===i)return function(t){return l=t,c=ou(_,n),h?v(t):a}(f);if(p)return c=ou(_,n),v(f)}return c===i&&(c=ou(_,n)),a}return n=Ga(n)||0,xa(e)&&(h=!!e.leading,u=(p="maxWait"in e)?$e(Ga(e.maxWait)||0,n):u,g="trailing"in e?!!e.trailing:g),w.cancel=function(){c!==i&&Ko(c),l=0,r=f=o=c=i},w.flush=function(){return c===i?a:m(Qu())},w}var ia=No(function(t,n){return Rr(t,1,n)}),ua=No(function(t,n,e){return Rr(t,Ga(n)||0,e)});function aa(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new on(s);var e=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=e.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return e.cache=i.set(o,u)||i,u};return e.cache=new(aa.Cache||yr),e}function sa(t){if("function"!=typeof t)throw new on(s);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}aa.Cache=yr;var ca=Ho(function(t,n){var e=(n=1==n.length&&_a(n[0])?te(n[0],_e(Ui())):te(qr(n,1),_e(Ui()))).length;return No(function(r){for(var o=-1,i=Je(r.length,e);++o<i;)r[o]=n[o].call(this,r[o]);return Jn(t,this,r)})}),fa=No(function(t,n){var e=Le(n,ji(fa));return Ti(t,A,i,n,e)}),la=No(function(t,n){var e=Le(n,ji(la));return Ti(t,b,i,n,e)}),ha=Mi(function(t,n){return Ti(t,T,i,i,i,n)});function pa(t,n){return t===n||t!=t&&n!=n}var ga=yi(Qr),va=yi(function(t,n){return t>=n}),da=oo(function(){return arguments}())?oo:function(t){return La(t)&&ln.call(t,"callee")&&!jn.call(t,"callee")},_a=r.isArray,ma=Bn?_e(Bn):function(t){return La(t)&&Xr(t)==st};function wa(t){return null!=t&&Ea(t.length)&&!Na(t)}function ya(t){return La(t)&&wa(t)}var Oa=We||Gs,Aa=Wn?_e(Wn):function(t){return La(t)&&Xr(t)==$};function ba(t){if(!La(t))return!1;var n=Xr(t);return n==V||n==J||"string"==typeof t.message&&"string"==typeof t.name&&!Da(t)}function Na(t){if(!xa(t))return!1;var n=Xr(t);return n==H||n==Y||n==G||n==tt}function Ta(t){return"number"==typeof t&&t==Wa(t)}function Ea(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=P}function xa(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function La(t){return null!=t&&"object"==typeof t}var Sa=Fn?_e(Fn):function(t){return La(t)&&Fi(t)==K};function Ma(t){return"number"==typeof t||La(t)&&Xr(t)==Z}function Da(t){if(!La(t)||Xr(t)!=Q)return!1;var n=In(t);if(null===n)return!0;var e=ln.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&fn.call(e)==vn}var Ia=Gn?_e(Gn):function(t){return La(t)&&Xr(t)==nt};var ka=qn?_e(qn):function(t){return La(t)&&Fi(t)==et};function Pa(t){return"string"==typeof t||!_a(t)&&La(t)&&Xr(t)==rt}function ja(t){return"symbol"==typeof t||La(t)&&Xr(t)==ot}var Ua=$n?_e($n):function(t){return La(t)&&Ea(t.length)&&!!xn[Xr(t)]};var Ra=yi(lo),za=yi(function(t,n){return t<=n});function Ca(t){if(!t)return[];if(wa(t))return Pa(t)?Ie(t):ri(t);if(Cn&&t[Cn])return function(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}(t[Cn]());var n=Fi(t);return(n==K?Ee:n==et?Se:ps)(t)}function Ba(t){return t?(t=Ga(t))===k||t===-k?(t<0?-1:1)*j:t==t?t:0:0===t?t:0}function Wa(t){var n=Ba(t),e=n%1;return n==n?e?n-e:n:0}function Fa(t){return t?Pr(Wa(t),0,R):0}function Ga(t){if("number"==typeof t)return t;if(ja(t))return U;if(xa(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=xa(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pt,"");var e=$t.test(t);return e||Vt.test(t)?Dn(t.slice(2),e?2:8):qt.test(t)?U:+t}function qa(t){return oi(t,is(t))}function $a(t){return null==t?"":Ro(t)}var Ja=ui(function(t,n){if(Zi(n)||wa(n))oi(n,os(n),t);else for(var e in n)ln.call(n,e)&&Lr(t,e,n[e])}),Va=ui(function(t,n){oi(n,is(n),t)}),Ha=ui(function(t,n,e,r){oi(n,is(n),t,r)}),Ya=ui(function(t,n,e,r){oi(n,os(n),t,r)}),Ka=Mi(kr);var Za=No(function(t,n){t=nn(t);var e=-1,r=n.length,o=r>2?n[2]:i;for(o&&Vi(n[0],n[1],o)&&(r=1);++e<r;)for(var u=n[e],a=is(u),s=-1,c=a.length;++s<c;){var f=a[s],l=t[f];(l===i||pa(l,sn[f])&&!ln.call(t,f))&&(t[f]=u[f])}return t}),Xa=No(function(t){return t.push(i,xi),Jn(as,i,t)});function Qa(t,n,e){var r=null==t?i:Kr(t,n);return r===i?e:r}function ts(t,n){return null!=t&&Gi(t,n,no)}var ns=vi(function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),t[n]=e},xs(Ms)),es=vi(function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),ln.call(t,n)?t[n].push(e):t[n]=[e]},Ui),rs=No(ro);function os(t){return wa(t)?br(t):co(t)}function is(t){return wa(t)?br(t,!0):fo(t)}var us=ui(function(t,n,e){vo(t,n,e)}),as=ui(function(t,n,e,r){vo(t,n,e,r)}),ss=Mi(function(t,n){var e={};if(null==t)return e;var r=!1;n=te(n,function(n){return n=Vo(n,t),r||(r=n.length>1),n}),oi(t,Ii(t),e),r&&(e=jr(e,h|p|g,Li));for(var o=n.length;o--;)Co(e,n[o]);return e});var cs=Mi(function(t,n){return null==t?{}:function(t,n){return wo(t,n,function(n,e){return ts(t,e)})}(t,n)});function fs(t,n){if(null==t)return{};var e=te(Ii(t),function(t){return[t]});return n=Ui(n),wo(t,e,function(t,e){return n(t,e[0])})}var ls=Ni(os),hs=Ni(is);function ps(t){return null==t?[]:me(t,os(t))}var gs=fi(function(t,n,e){return n=n.toLowerCase(),t+(e?vs(n):n)});function vs(t){return bs($a(t).toLowerCase())}function ds(t){return(t=$a(t))&&t.replace(Yt,Ae).replace(yn,"")}var _s=fi(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),ms=fi(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),ws=ci("toLowerCase");var ys=fi(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()});var Os=fi(function(t,n,e){return t+(e?" ":"")+bs(n)});var As=fi(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),bs=ci("toUpperCase");function Ns(t,n,e){return t=$a(t),(n=e?i:n)===i?function(t){return Nn.test(t)}(t)?function(t){return t.match(An)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(n)||[]}var Ts=No(function(t,n){try{return Jn(t,i,n)}catch(t){return ba(t)?t:new Xt(t)}}),Es=Mi(function(t,n){return Hn(n,function(n){n=fu(n),Ir(t,n,ea(t[n],t))}),t});function xs(t){return function(){return t}}var Ls=pi(),Ss=pi(!0);function Ms(t){return t}function Ds(t){return so("function"==typeof t?t:jr(t,h))}var Is=No(function(t,n){return function(e){return ro(e,t,n)}}),ks=No(function(t,n){return function(e){return ro(t,e,n)}});function Ps(t,n,e){var r=os(n),o=Yr(n,r);null!=e||xa(n)&&(o.length||!r.length)||(e=n,n=t,t=this,o=Yr(n,os(n)));var i=!(xa(e)&&"chain"in e&&!e.chain),u=Na(t);return Hn(o,function(e){var r=n[e];t[e]=r,u&&(t.prototype[e]=function(){var n=this.__chain__;if(i||n){var e=t(this.__wrapped__);return(e.__actions__=ri(this.__actions__)).push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,ne([this.value()],arguments))})}),t}function js(){}var Us=_i(te),Rs=_i(Kn),zs=_i(oe);function Cs(t){return Hi(t)?he(fu(t)):function(t){return function(n){return Kr(n,t)}}(t)}var Bs=wi(),Ws=wi(!0);function Fs(){return[]}function Gs(){return!1}var qs=di(function(t,n){return t+n},0),$s=Ai("ceil"),Js=di(function(t,n){return t/n},1),Vs=Ai("floor");var Hs,Ys=di(function(t,n){return t*n},1),Ks=Ai("round"),Zs=di(function(t,n){return t-n},0);return pr.after=function(t,n){if("function"!=typeof n)throw new on(s);return t=Wa(t),function(){if(--t<1)return n.apply(this,arguments)}},pr.ary=ta,pr.assign=Ja,pr.assignIn=Va,pr.assignInWith=Ha,pr.assignWith=Ya,pr.at=Ka,pr.before=na,pr.bind=ea,pr.bindAll=Es,pr.bindKey=ra,pr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return _a(t)?t:[t]},pr.chain=Cu,pr.chunk=function(t,n,e){n=(e?Vi(t,n,e):n===i)?1:$e(Wa(n),0);var o=null==t?0:t.length;if(!o||n<1)return[];for(var u=0,a=0,s=r(ze(o/n));u<o;)s[a++]=Do(t,u,u+=n);return s},pr.compact=function(t){for(var n=-1,e=null==t?0:t.length,r=0,o=[];++n<e;){var i=t[n];i&&(o[r++]=i)}return o},pr.concat=function(){var t=arguments.length;if(!t)return[];for(var n=r(t-1),e=arguments[0],o=t;o--;)n[o-1]=arguments[o];return ne(_a(e)?ri(e):[e],qr(n,1))},pr.cond=function(t){var n=null==t?0:t.length,e=Ui();return t=n?te(t,function(t){if("function"!=typeof t[1])throw new on(s);return[e(t[0]),t[1]]}):[],No(function(e){for(var r=-1;++r<n;){var o=t[r];if(Jn(o[0],this,e))return Jn(o[1],this,e)}})},pr.conforms=function(t){return function(t){var n=os(t);return function(e){return Ur(e,t,n)}}(jr(t,h))},pr.constant=xs,pr.countBy=Fu,pr.create=function(t,n){var e=gr(t);return null==n?e:Dr(e,n)},pr.curry=function t(n,e,r){var o=Ti(n,y,i,i,i,i,i,e=r?i:e);return o.placeholder=t.placeholder,o},pr.curryRight=function t(n,e,r){var o=Ti(n,O,i,i,i,i,i,e=r?i:e);return o.placeholder=t.placeholder,o},pr.debounce=oa,pr.defaults=Za,pr.defaultsDeep=Xa,pr.defer=ia,pr.delay=ua,pr.difference=pu,pr.differenceBy=gu,pr.differenceWith=vu,pr.drop=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,(n=e||n===i?1:Wa(n))<0?0:n,r):[]},pr.dropRight=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,0,(n=r-(n=e||n===i?1:Wa(n)))<0?0:n):[]},pr.dropRightWhile=function(t,n){return t&&t.length?Wo(t,Ui(n,3),!0,!0):[]},pr.dropWhile=function(t,n){return t&&t.length?Wo(t,Ui(n,3),!0):[]},pr.fill=function(t,n,e,r){var o=null==t?0:t.length;return o?(e&&"number"!=typeof e&&Vi(t,n,e)&&(e=0,r=o),function(t,n,e,r){var o=t.length;for((e=Wa(e))<0&&(e=-e>o?0:o+e),(r=r===i||r>o?o:Wa(r))<0&&(r+=o),r=e>r?0:Fa(r);e<r;)t[e++]=n;return t}(t,n,e,r)):[]},pr.filter=function(t,n){return(_a(t)?Zn:Gr)(t,Ui(n,3))},pr.flatMap=function(t,n){return qr(Ku(t,n),1)},pr.flatMapDeep=function(t,n){return qr(Ku(t,n),k)},pr.flatMapDepth=function(t,n,e){return e=e===i?1:Wa(e),qr(Ku(t,n),e)},pr.flatten=mu,pr.flattenDeep=function(t){return null!=t&&t.length?qr(t,k):[]},pr.flattenDepth=function(t,n){return null!=t&&t.length?qr(t,n=n===i?1:Wa(n)):[]},pr.flip=function(t){return Ti(t,E)},pr.flow=Ls,pr.flowRight=Ss,pr.fromPairs=function(t){for(var n=-1,e=null==t?0:t.length,r={};++n<e;){var o=t[n];r[o[0]]=o[1]}return r},pr.functions=function(t){return null==t?[]:Yr(t,os(t))},pr.functionsIn=function(t){return null==t?[]:Yr(t,is(t))},pr.groupBy=Vu,pr.initial=function(t){return null!=t&&t.length?Do(t,0,-1):[]},pr.intersection=yu,pr.intersectionBy=Ou,pr.intersectionWith=Au,pr.invert=ns,pr.invertBy=es,pr.invokeMap=Hu,pr.iteratee=Ds,pr.keyBy=Yu,pr.keys=os,pr.keysIn=is,pr.map=Ku,pr.mapKeys=function(t,n){var e={};return n=Ui(n,3),Vr(t,function(t,r,o){Ir(e,n(t,r,o),t)}),e},pr.mapValues=function(t,n){var e={};return n=Ui(n,3),Vr(t,function(t,r,o){Ir(e,r,n(t,r,o))}),e},pr.matches=function(t){return po(jr(t,h))},pr.matchesProperty=function(t,n){return go(t,jr(n,h))},pr.memoize=aa,pr.merge=us,pr.mergeWith=as,pr.method=Is,pr.methodOf=ks,pr.mixin=Ps,pr.negate=sa,pr.nthArg=function(t){return t=Wa(t),No(function(n){return _o(n,t)})},pr.omit=ss,pr.omitBy=function(t,n){return fs(t,sa(Ui(n)))},pr.once=function(t){return na(2,t)},pr.orderBy=function(t,n,e,r){return null==t?[]:(_a(n)||(n=null==n?[]:[n]),_a(e=r?i:e)||(e=null==e?[]:[e]),mo(t,n,e))},pr.over=Us,pr.overArgs=ca,pr.overEvery=Rs,pr.overSome=zs,pr.partial=fa,pr.partialRight=la,pr.partition=Zu,pr.pick=cs,pr.pickBy=fs,pr.property=Cs,pr.propertyOf=function(t){return function(n){return null==t?i:Kr(t,n)}},pr.pull=Nu,pr.pullAll=Tu,pr.pullAllBy=function(t,n,e){return t&&t.length&&n&&n.length?yo(t,n,Ui(e,2)):t},pr.pullAllWith=function(t,n,e){return t&&t.length&&n&&n.length?yo(t,n,i,e):t},pr.pullAt=Eu,pr.range=Bs,pr.rangeRight=Ws,pr.rearg=ha,pr.reject=function(t,n){return(_a(t)?Zn:Gr)(t,sa(Ui(n,3)))},pr.remove=function(t,n){var e=[];if(!t||!t.length)return e;var r=-1,o=[],i=t.length;for(n=Ui(n,3);++r<i;){var u=t[r];n(u,r,t)&&(e.push(u),o.push(r))}return Oo(t,o),e},pr.rest=function(t,n){if("function"!=typeof t)throw new on(s);return No(t,n=n===i?n:Wa(n))},pr.reverse=xu,pr.sampleSize=function(t,n,e){return n=(e?Vi(t,n,e):n===i)?1:Wa(n),(_a(t)?Tr:Eo)(t,n)},pr.set=function(t,n,e){return null==t?t:xo(t,n,e)},pr.setWith=function(t,n,e,r){return r="function"==typeof r?r:i,null==t?t:xo(t,n,e,r)},pr.shuffle=function(t){return(_a(t)?Er:Mo)(t)},pr.slice=function(t,n,e){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&Vi(t,n,e)?(n=0,e=r):(n=null==n?0:Wa(n),e=e===i?r:Wa(e)),Do(t,n,e)):[]},pr.sortBy=Xu,pr.sortedUniq=function(t){return t&&t.length?jo(t):[]},pr.sortedUniqBy=function(t,n){return t&&t.length?jo(t,Ui(n,2)):[]},pr.split=function(t,n,e){return e&&"number"!=typeof e&&Vi(t,n,e)&&(n=e=i),(e=e===i?R:e>>>0)?(t=$a(t))&&("string"==typeof n||null!=n&&!Ia(n))&&!(n=Ro(n))&&Te(t)?Yo(Ie(t),0,e):t.split(n,e):[]},pr.spread=function(t,n){if("function"!=typeof t)throw new on(s);return n=null==n?0:$e(Wa(n),0),No(function(e){var r=e[n],o=Yo(e,0,n);return r&&ne(o,r),Jn(t,this,o)})},pr.tail=function(t){var n=null==t?0:t.length;return n?Do(t,1,n):[]},pr.take=function(t,n,e){return t&&t.length?Do(t,0,(n=e||n===i?1:Wa(n))<0?0:n):[]},pr.takeRight=function(t,n,e){var r=null==t?0:t.length;return r?Do(t,(n=r-(n=e||n===i?1:Wa(n)))<0?0:n,r):[]},pr.takeRightWhile=function(t,n){return t&&t.length?Wo(t,Ui(n,3),!1,!0):[]},pr.takeWhile=function(t,n){return t&&t.length?Wo(t,Ui(n,3)):[]},pr.tap=function(t,n){return n(t),t},pr.throttle=function(t,n,e){var r=!0,o=!0;if("function"!=typeof t)throw new on(s);return xa(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),oa(t,n,{leading:r,maxWait:n,trailing:o})},pr.thru=Bu,pr.toArray=Ca,pr.toPairs=ls,pr.toPairsIn=hs,pr.toPath=function(t){return _a(t)?te(t,fu):ja(t)?[t]:ri(cu($a(t)))},pr.toPlainObject=qa,pr.transform=function(t,n,e){var r=_a(t),o=r||Oa(t)||Ua(t);if(n=Ui(n,4),null==e){var i=t&&t.constructor;e=o?r?new i:[]:xa(t)&&Na(i)?gr(In(t)):{}}return(o?Hn:Vr)(t,function(t,r,o){return n(e,t,r,o)}),e},pr.unary=function(t){return ta(t,1)},pr.union=Lu,pr.unionBy=Su,pr.unionWith=Mu,pr.uniq=function(t){return t&&t.length?zo(t):[]},pr.uniqBy=function(t,n){return t&&t.length?zo(t,Ui(n,2)):[]},pr.uniqWith=function(t,n){return n="function"==typeof n?n:i,t&&t.length?zo(t,i,n):[]},pr.unset=function(t,n){return null==t||Co(t,n)},pr.unzip=Du,pr.unzipWith=Iu,pr.update=function(t,n,e){return null==t?t:Bo(t,n,Jo(e))},pr.updateWith=function(t,n,e,r){return r="function"==typeof r?r:i,null==t?t:Bo(t,n,Jo(e),r)},pr.values=ps,pr.valuesIn=function(t){return null==t?[]:me(t,is(t))},pr.without=ku,pr.words=Ns,pr.wrap=function(t,n){return fa(Jo(n),t)},pr.xor=Pu,pr.xorBy=ju,pr.xorWith=Uu,pr.zip=Ru,pr.zipObject=function(t,n){return qo(t||[],n||[],Lr)},pr.zipObjectDeep=function(t,n){return qo(t||[],n||[],xo)},pr.zipWith=zu,pr.entries=ls,pr.entriesIn=hs,pr.extend=Va,pr.extendWith=Ha,Ps(pr,pr),pr.add=qs,pr.attempt=Ts,pr.camelCase=gs,pr.capitalize=vs,pr.ceil=$s,pr.clamp=function(t,n,e){return e===i&&(e=n,n=i),e!==i&&(e=(e=Ga(e))==e?e:0),n!==i&&(n=(n=Ga(n))==n?n:0),Pr(Ga(t),n,e)},pr.clone=function(t){return jr(t,g)},pr.cloneDeep=function(t){return jr(t,h|g)},pr.cloneDeepWith=function(t,n){return jr(t,h|g,n="function"==typeof n?n:i)},pr.cloneWith=function(t,n){return jr(t,g,n="function"==typeof n?n:i)},pr.conformsTo=function(t,n){return null==n||Ur(t,n,os(n))},pr.deburr=ds,pr.defaultTo=function(t,n){return null==t||t!=t?n:t},pr.divide=Js,pr.endsWith=function(t,n,e){t=$a(t),n=Ro(n);var r=t.length,o=e=e===i?r:Pr(Wa(e),0,r);return(e-=n.length)>=0&&t.slice(e,o)==n},pr.eq=pa,pr.escape=function(t){return(t=$a(t))&&Tt.test(t)?t.replace(bt,be):t},pr.escapeRegExp=function(t){return(t=$a(t))&&kt.test(t)?t.replace(It,"\\$&"):t},pr.every=function(t,n,e){var r=_a(t)?Kn:Wr;return e&&Vi(t,n,e)&&(n=i),r(t,Ui(n,3))},pr.find=Gu,pr.findIndex=du,pr.findKey=function(t,n){return ue(t,Ui(n,3),Vr)},pr.findLast=qu,pr.findLastIndex=_u,pr.findLastKey=function(t,n){return ue(t,Ui(n,3),Hr)},pr.floor=Vs,pr.forEach=$u,pr.forEachRight=Ju,pr.forIn=function(t,n){return null==t?t:$r(t,Ui(n,3),is)},pr.forInRight=function(t,n){return null==t?t:Jr(t,Ui(n,3),is)},pr.forOwn=function(t,n){return t&&Vr(t,Ui(n,3))},pr.forOwnRight=function(t,n){return t&&Hr(t,Ui(n,3))},pr.get=Qa,pr.gt=ga,pr.gte=va,pr.has=function(t,n){return null!=t&&Gi(t,n,to)},pr.hasIn=ts,pr.head=wu,pr.identity=Ms,pr.includes=function(t,n,e,r){t=wa(t)?t:ps(t),e=e&&!r?Wa(e):0;var o=t.length;return e<0&&(e=$e(o+e,0)),Pa(t)?e<=o&&t.indexOf(n,e)>-1:!!o&&se(t,n,e)>-1},pr.indexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:Wa(e);return o<0&&(o=$e(r+o,0)),se(t,n,o)},pr.inRange=function(t,n,e){return n=Ba(n),e===i?(e=n,n=0):e=Ba(e),function(t,n,e){return t>=Je(n,e)&&t<$e(n,e)}(t=Ga(t),n,e)},pr.invoke=rs,pr.isArguments=da,pr.isArray=_a,pr.isArrayBuffer=ma,pr.isArrayLike=wa,pr.isArrayLikeObject=ya,pr.isBoolean=function(t){return!0===t||!1===t||La(t)&&Xr(t)==q},pr.isBuffer=Oa,pr.isDate=Aa,pr.isElement=function(t){return La(t)&&1===t.nodeType&&!Da(t)},pr.isEmpty=function(t){if(null==t)return!0;if(wa(t)&&(_a(t)||"string"==typeof t||"function"==typeof t.splice||Oa(t)||Ua(t)||da(t)))return!t.length;var n=Fi(t);if(n==K||n==et)return!t.size;if(Zi(t))return!co(t).length;for(var e in t)if(ln.call(t,e))return!1;return!0},pr.isEqual=function(t,n){return io(t,n)},pr.isEqualWith=function(t,n,e){var r=(e="function"==typeof e?e:i)?e(t,n):i;return r===i?io(t,n,i,e):!!r},pr.isError=ba,pr.isFinite=function(t){return"number"==typeof t&&Fe(t)},pr.isFunction=Na,pr.isInteger=Ta,pr.isLength=Ea,pr.isMap=Sa,pr.isMatch=function(t,n){return t===n||uo(t,n,zi(n))},pr.isMatchWith=function(t,n,e){return e="function"==typeof e?e:i,uo(t,n,zi(n),e)},pr.isNaN=function(t){return Ma(t)&&t!=+t},pr.isNative=function(t){if(Ki(t))throw new Xt(a);return ao(t)},pr.isNil=function(t){return null==t},pr.isNull=function(t){return null===t},pr.isNumber=Ma,pr.isObject=xa,pr.isObjectLike=La,pr.isPlainObject=Da,pr.isRegExp=Ia,pr.isSafeInteger=function(t){return Ta(t)&&t>=-P&&t<=P},pr.isSet=ka,pr.isString=Pa,pr.isSymbol=ja,pr.isTypedArray=Ua,pr.isUndefined=function(t){return t===i},pr.isWeakMap=function(t){return La(t)&&Fi(t)==ut},pr.isWeakSet=function(t){return La(t)&&Xr(t)==at},pr.join=function(t,n){return null==t?"":Ge.call(t,n)},pr.kebabCase=_s,pr.last=bu,pr.lastIndexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=r;return e!==i&&(o=(o=Wa(e))<0?$e(r+o,0):Je(o,r-1)),n==n?function(t,n,e){for(var r=e+1;r--;)if(t[r]===n)return r;return r}(t,n,o):ae(t,fe,o,!0)},pr.lowerCase=ms,pr.lowerFirst=ws,pr.lt=Ra,pr.lte=za,pr.max=function(t){return t&&t.length?Fr(t,Ms,Qr):i},pr.maxBy=function(t,n){return t&&t.length?Fr(t,Ui(n,2),Qr):i},pr.mean=function(t){return le(t,Ms)},pr.meanBy=function(t,n){return le(t,Ui(n,2))},pr.min=function(t){return t&&t.length?Fr(t,Ms,lo):i},pr.minBy=function(t,n){return t&&t.length?Fr(t,Ui(n,2),lo):i},pr.stubArray=Fs,pr.stubFalse=Gs,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Ys,pr.nth=function(t,n){return t&&t.length?_o(t,Wa(n)):i},pr.noConflict=function(){return Pn._===this&&(Pn._=dn),this},pr.noop=js,pr.now=Qu,pr.pad=function(t,n,e){t=$a(t);var r=(n=Wa(n))?De(t):0;if(!n||r>=n)return t;var o=(n-r)/2;return mi(Ce(o),e)+t+mi(ze(o),e)},pr.padEnd=function(t,n,e){t=$a(t);var r=(n=Wa(n))?De(t):0;return n&&r<n?t+mi(n-r,e):t},pr.padStart=function(t,n,e){t=$a(t);var r=(n=Wa(n))?De(t):0;return n&&r<n?mi(n-r,e)+t:t},pr.parseInt=function(t,n,e){return e||null==n?n=0:n&&(n=+n),He($a(t).replace(jt,""),n||0)},pr.random=function(t,n,e){if(e&&"boolean"!=typeof e&&Vi(t,n,e)&&(n=e=i),e===i&&("boolean"==typeof n?(e=n,n=i):"boolean"==typeof t&&(e=t,t=i)),t===i&&n===i?(t=0,n=1):(t=Ba(t),n===i?(n=t,t=0):n=Ba(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var o=Ye();return Je(t+o*(n-t+Mn("1e-"+((o+"").length-1))),n)}return Ao(t,n)},pr.reduce=function(t,n,e){var r=_a(t)?ee:ge,o=arguments.length<3;return r(t,Ui(n,4),e,o,Cr)},pr.reduceRight=function(t,n,e){var r=_a(t)?re:ge,o=arguments.length<3;return r(t,Ui(n,4),e,o,Br)},pr.repeat=function(t,n,e){return n=(e?Vi(t,n,e):n===i)?1:Wa(n),bo($a(t),n)},pr.replace=function(){var t=arguments,n=$a(t[0]);return t.length<3?n:n.replace(t[1],t[2])},pr.result=function(t,n,e){var r=-1,o=(n=Vo(n,t)).length;for(o||(o=1,t=i);++r<o;){var u=null==t?i:t[fu(n[r])];u===i&&(r=o,u=e),t=Na(u)?u.call(t):u}return t},pr.round=Ks,pr.runInContext=t,pr.sample=function(t){return(_a(t)?Nr:To)(t)},pr.size=function(t){if(null==t)return 0;if(wa(t))return Pa(t)?De(t):t.length;var n=Fi(t);return n==K||n==et?t.size:co(t).length},pr.snakeCase=ys,pr.some=function(t,n,e){var r=_a(t)?oe:Io;return e&&Vi(t,n,e)&&(n=i),r(t,Ui(n,3))},pr.sortedIndex=function(t,n){return ko(t,n)},pr.sortedIndexBy=function(t,n,e){return Po(t,n,Ui(e,2))},pr.sortedIndexOf=function(t,n){var e=null==t?0:t.length;if(e){var r=ko(t,n);if(r<e&&pa(t[r],n))return r}return-1},pr.sortedLastIndex=function(t,n){return ko(t,n,!0)},pr.sortedLastIndexBy=function(t,n,e){return Po(t,n,Ui(e,2),!0)},pr.sortedLastIndexOf=function(t,n){if(null!=t&&t.length){var e=ko(t,n,!0)-1;if(pa(t[e],n))return e}return-1},pr.startCase=Os,pr.startsWith=function(t,n,e){return t=$a(t),e=null==e?0:Pr(Wa(e),0,t.length),n=Ro(n),t.slice(e,e+n.length)==n},pr.subtract=Zs,pr.sum=function(t){return t&&t.length?ve(t,Ms):0},pr.sumBy=function(t,n){return t&&t.length?ve(t,Ui(n,2)):0},pr.template=function(t,n,e){var r=pr.templateSettings;e&&Vi(t,n,e)&&(n=i),t=$a(t),n=Ha({},n,r,Ei);var o,u,a=Ha({},n.imports,r.imports,Ei),s=os(a),c=me(a,s),f=0,l=n.interpolate||Kt,h="__p += '",p=en((n.escape||Kt).source+"|"+l.source+"|"+(l===Lt?Ft:Kt).source+"|"+(n.evaluate||Kt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++En+"]")+"\n";t.replace(p,function(n,e,r,i,a,s){return r||(r=i),h+=t.slice(f,s).replace(Zt,Ne),e&&(o=!0,h+="' +\n__e("+e+") +\n'"),a&&(u=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+n.length,n}),h+="';\n";var v=n.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(wt,""):h).replace(yt,"$1").replace(Ot,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var d=Ts(function(){return Qt(s,g+"return "+h).apply(i,c)});if(d.source=h,ba(d))throw d;return d},pr.times=function(t,n){if((t=Wa(t))<1||t>P)return[];var e=R,r=Je(t,R);n=Ui(n),t-=R;for(var o=de(r,n);++e<t;)n(e);return o},pr.toFinite=Ba,pr.toInteger=Wa,pr.toLength=Fa,pr.toLower=function(t){return $a(t).toLowerCase()},pr.toNumber=Ga,pr.toSafeInteger=function(t){return t?Pr(Wa(t),-P,P):0===t?t:0},pr.toString=$a,pr.toUpper=function(t){return $a(t).toUpperCase()},pr.trim=function(t,n,e){if((t=$a(t))&&(e||n===i))return t.replace(Pt,"");if(!t||!(n=Ro(n)))return t;var r=Ie(t),o=Ie(n);return Yo(r,ye(r,o),Oe(r,o)+1).join("")},pr.trimEnd=function(t,n,e){if((t=$a(t))&&(e||n===i))return t.replace(Ut,"");if(!t||!(n=Ro(n)))return t;var r=Ie(t);return Yo(r,0,Oe(r,Ie(n))+1).join("")},pr.trimStart=function(t,n,e){if((t=$a(t))&&(e||n===i))return t.replace(jt,"");if(!t||!(n=Ro(n)))return t;var r=Ie(t);return Yo(r,ye(r,Ie(n))).join("")},pr.truncate=function(t,n){var e=x,r=L;if(xa(n)){var o="separator"in n?n.separator:o;e="length"in n?Wa(n.length):e,r="omission"in n?Ro(n.omission):r}var u=(t=$a(t)).length;if(Te(t)){var a=Ie(t);u=a.length}if(e>=u)return t;var s=e-De(r);if(s<1)return r;var c=a?Yo(a,0,s).join(""):t.slice(0,s);if(o===i)return c+r;if(a&&(s+=c.length-s),Ia(o)){if(t.slice(s).search(o)){var f,l=c;for(o.global||(o=en(o.source,$a(Gt.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var h=f.index;c=c.slice(0,h===i?s:h)}}else if(t.indexOf(Ro(o),s)!=s){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},pr.unescape=function(t){return(t=$a(t))&&Nt.test(t)?t.replace(At,ke):t},pr.uniqueId=function(t){var n=++hn;return $a(t)+n},pr.upperCase=As,pr.upperFirst=bs,pr.each=$u,pr.eachRight=Ju,pr.first=wu,Ps(pr,(Hs={},Vr(pr,function(t,n){ln.call(pr.prototype,n)||(Hs[n]=t)}),Hs),{chain:!1}),pr.VERSION="4.17.11",Hn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pr[t].placeholder=pr}),Hn(["drop","take"],function(t,n){_r.prototype[t]=function(e){e=e===i?1:$e(Wa(e),0);var r=this.__filtered__&&!n?new _r(this):this.clone();return r.__filtered__?r.__takeCount__=Je(e,r.__takeCount__):r.__views__.push({size:Je(e,R),type:t+(r.__dir__<0?"Right":"")}),r},_r.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),Hn(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==D||3==e;_r.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Ui(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}}),Hn(["head","last"],function(t,n){var e="take"+(n?"Right":"");_r.prototype[t]=function(){return this[e](1).value()[0]}}),Hn(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");_r.prototype[t]=function(){return this.__filtered__?new _r(this):this[e](1)}}),_r.prototype.compact=function(){return this.filter(Ms)},_r.prototype.find=function(t){return this.filter(t).head()},_r.prototype.findLast=function(t){return this.reverse().find(t)},_r.prototype.invokeMap=No(function(t,n){return"function"==typeof t?new _r(this):this.map(function(e){return ro(e,t,n)})}),_r.prototype.reject=function(t){return this.filter(sa(Ui(t)))},_r.prototype.slice=function(t,n){t=Wa(t);var e=this;return e.__filtered__&&(t>0||n<0)?new _r(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==i&&(e=(n=Wa(n))<0?e.dropRight(-n):e.take(n-t)),e)},_r.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_r.prototype.toArray=function(){return this.take(R)},Vr(_r.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),o=pr[r?"take"+("last"==n?"Right":""):n],u=r||/^find/.test(n);o&&(pr.prototype[n]=function(){var n=this.__wrapped__,a=r?[1]:arguments,s=n instanceof _r,c=a[0],f=s||_a(n),l=function(t){var n=o.apply(pr,ne([t],a));return r&&h?n[0]:n};f&&e&&"function"==typeof c&&1!=c.length&&(s=f=!1);var h=this.__chain__,p=!!this.__actions__.length,g=u&&!h,v=s&&!p;if(!u&&f){n=v?n:new _r(this);var d=t.apply(n,a);return d.__actions__.push({func:Bu,args:[l],thisArg:i}),new dr(d,h)}return g&&v?t.apply(this,a):(d=this.thru(l),g?r?d.value()[0]:d.value():d)})}),Hn(["pop","push","shift","sort","splice","unshift"],function(t){var n=un[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(_a(o)?o:[],t)}return this[e](function(e){return n.apply(_a(e)?e:[],t)})}}),Vr(_r.prototype,function(t,n){var e=pr[n];if(e){var r=e.name+"";(or[r]||(or[r]=[])).push({name:n,func:e})}}),or[gi(i,m).name]=[{name:"wrapper",func:i}],_r.prototype.clone=function(){var t=new _r(this.__wrapped__);return t.__actions__=ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ri(this.__views__),t},_r.prototype.reverse=function(){if(this.__filtered__){var t=new _r(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_r.prototype.value=function(){var t=this.__wrapped__.value(),n=this.__dir__,e=_a(t),r=n<0,o=e?t.length:0,i=function(t,n,e){for(var r=-1,o=e.length;++r<o;){var i=e[r],u=i.size;switch(i.type){case"drop":t+=u;break;case"dropRight":n-=u;break;case"take":n=Je(n,t+u);break;case"takeRight":t=$e(t,n-u)}}return{start:t,end:n}}(0,o,this.__views__),u=i.start,a=i.end,s=a-u,c=r?a:u-1,f=this.__iteratees__,l=f.length,h=0,p=Je(s,this.__takeCount__);if(!e||!r&&o==s&&p==s)return Fo(t,this.__actions__);var g=[];t:for(;s--&&h<p;){for(var v=-1,d=t[c+=n];++v<l;){var _=f[v],m=_.iteratee,w=_.type,y=m(d);if(w==I)d=y;else if(!y){if(w==D)continue t;break t}}g[h++]=d}return g},pr.prototype.at=Wu,pr.prototype.chain=function(){return Cu(this)},pr.prototype.commit=function(){return new dr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===i&&(this.__values__=Ca(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},pr.prototype.plant=function(t){for(var n,e=this;e instanceof vr;){var r=hu(e);r.__index__=0,r.__values__=i,n?o.__wrapped__=r:n=r;var o=r;e=e.__wrapped__}return o.__wrapped__=t,n},pr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _r){var n=t;return this.__actions__.length&&(n=new _r(this)),(n=n.reverse()).__actions__.push({func:Bu,args:[xu],thisArg:i}),new dr(n,this.__chain__)}return this.thru(xu)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Fo(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Cn&&(pr.prototype[Cn]=function(){return this}),pr}();Pn._=Pe,(o=function(){return Pe}.call(n,e,n,r))===i||(r.exports=o)}).call(this)}).call(this,e(20),e(21)(t))},function(t,n,e){var r={workers:e(22),serializeDataSet:function(t){for(var n=[t[0].input.length,t[0].output.length],e=0;e<t.length;e++){var r;for(r=0;r<n[0];r++)n.push(t[e].input[r]);for(r=0;r<n[1];r++)n.push(t[e].output[r])}return n},activateSerializedNetwork:function(t,n,e,r,o){for(var i=0;i<r[0];i++)n[i]=t[i];for(i=2;i<r.length;i++){let t=r[i++],u=r[i++],a=r[i++],s=r[i++],c=r[i++];for(e[t]=(-1===c?1:n[c])*s*e[t]+u;-2!==r[i];)e[t]+=n[r[i++]]*r[i++]*(-1===r[i++]?1:n[r[i-1]]);n[t]=o[a](e[t])}var u=[];for(i=n.length-r[1];i<n.length;i++)u.push(n[i]);return u},deserializeDataSet:function(t){for(var n=[],e=t[0]+t[1],r=0;r<(t.length-2)/e;r++){let i=[];for(var o=2+r*e;o<2+r*e+t[0];o++)i.push(t[o]);let u=[];for(o=2+r*e+t[0];o<2+r*e+e;o++)u.push(t[o]);n.push(i),n.push(u)}return n},testSerializedSet:function(t,n,e,r,o,i){for(var u=0,a=0;a<t.length;a+=2){let s=this.activateSerializedNetwork(t[a],e,r,o,i);u+=n(t[a+1],s)}return u/(t.length/2)},activations:[function(t){return 1/(1+Math.exp(-t))},function(t){return Math.tanh(t)},function(t){return t},function(t){return t>0?1:0},function(t){return t>0?t:0},function(t){return t/(1+Math.abs(t))},function(t){return Math.sin(t)},function(t){return Math.exp(-Math.pow(t,2))},function(t){return(Math.sqrt(Math.pow(t,2)+1)-1)/2+t},function(t){return t>0?1:-1},function(t){return 2/(1+Math.exp(-t))-1},function(t){return Math.max(-1,Math.min(1,t))},function(t){return Math.abs(t)},function(t){return 1-t},function(t){var n=1.6732632423543772;return 1.0507009873554805*(t>0?t:n*Math.exp(t)-n)}]};for(var o in r)t.exports[o]=r[o]},function(t,n,e){t.exports=a;var r=e(0),o=e(1),i=e(9),u=e(2);function a(t){this.nodes=[],this.connections={in:[],out:[],self:[]};for(var n=0;n<t;n++)this.nodes.push(new u)}a.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var e=0;e<this.nodes.length;e++){var r;r=void 0===t?this.nodes[e].activate():this.nodes[e].activate(t[e]),n.push(r)}return n},propagate:function(t,n,e){if(void 0!==e&&e.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var r=this.nodes.length-1;r>=0;r--)void 0===e?this.nodes[r].propagate(t,n,!0):this.nodes[r].propagate(t,n,!0,e[r])},connect:function(t,n,e){let s=this===t;var c,f,l=[];if(t instanceof a){if(void 0===n&&(s?(o.warnings&&console.warn("No group connection specified, using ONE_TO_ONE"),n=r.connection.ONE_TO_ONE):(o.warnings&&console.warn("No group connection specified, using ALL_TO_ALL"),n=r.connection.ALL_TO_ALL)),n===r.connection.ALL_TO_ALL||n===r.connection.ALL_TO_ELSE)for(c=0;c<this.nodes.length;c++)for(f=0;f<t.nodes.length;f++){if(n===r.connection.ALL_TO_ELSE&&this.nodes[c]===t.nodes[f])continue;let o=this.nodes[c].connect(t.nodes[f],e);this.connections.out.push(o[0]),t.connections.in.push(o[0]),l.push(o[0])}else if(n===r.connection.ONE_TO_ONE)if(s)for(c=0;c<this.nodes.length;c++){let n=this.nodes[c].connect(t.nodes[c],e);this.connections.self.push(n[0]),l.push(n[0])}else{if(this.nodes.length!==t.nodes.length)throw new Error("From and To group must be the same size!");for(c=0;c<this.nodes.length;c++){let n=this.nodes[c].connect(t.nodes[c],e);this.connections.out.push(n[0]),t.connections.in.push(n[0]),l.push(n[0])}}}else if(t instanceof i)l=t.input(this,n,e);else if(t instanceof u)for(c=0;c<this.nodes.length;c++){let n=this.nodes[c].connect(t,e);this.connections.out.push(n[0]),l.push(n[0])}return l},gate:function(t,n){if(void 0===n)throw new Error("Please specify Gating.INPUT, Gating.OUTPUT");Array.isArray(t)||(t=[t]);var e,o,i=[],u=[];for(e=0;e<t.length;e++){var a=t[e];i.includes(a.from)||i.push(a.from),u.includes(a.to)||u.push(a.to)}switch(n){case r.gating.INPUT:for(e=0;e<u.length;e++){let n=u[e],r=this.nodes[e%this.nodes.length];for(o=0;o<n.connections.in.length;o++){let e=n.connections.in[o];t.includes(e)&&r.gate(e)}}break;case r.gating.OUTPUT:for(e=0;e<i.length;e++){let n=i[e],r=this.nodes[e%this.nodes.length];for(o=0;o<n.connections.out.length;o++){let e=n.connections.out[o];t.includes(e)&&r.gate(e)}}break;case r.gating.SELF:for(e=0;e<i.length;e++){let n=i[e],r=this.nodes[e%this.nodes.length];t.includes(n.connections.self)&&r.gate(n.connections.self)}}},set:function(t){for(var n=0;n<this.nodes.length;n++)void 0!==t.bias&&(this.nodes[n].bias=t.bias),this.nodes[n].squash=t.squash||this.nodes[n].squash,this.nodes[n].type=t.type||this.nodes[n].type},disconnect:function(t,n){var e,r,o;if(n=n||!1,t instanceof a)for(e=0;e<this.nodes.length;e++)for(r=0;r<t.nodes.length;r++){for(this.nodes[e].disconnect(t.nodes[r],n),o=this.connections.out.length-1;o>=0;o--){let n=this.connections.out[o];if(n.from===this.nodes[e]&&n.to===t.nodes[r]){this.connections.out.splice(o,1);break}}if(n)for(o=this.connections.in.length-1;o>=0;o--){let n=this.connections.in[o];if(n.from===t.nodes[r]&&n.to===this.nodes[e]){this.connections.in.splice(o,1);break}}}else if(t instanceof u)for(e=0;e<this.nodes.length;e++){for(this.nodes[e].disconnect(t,n),r=this.connections.out.length-1;r>=0;r--){let n=this.connections.out[r];if(n.from===this.nodes[e]&&n.to===t){this.connections.out.splice(r,1);break}}if(n)for(r=this.connections.in.length-1;r>=0;r--){var i=this.connections.in[r];if(i.from===t&&i.to===this.nodes[e]){this.connections.in.splice(r,1);break}}}},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()}}},function(t,n,e){var r=e(0),o=e(8),i=e(2);function u(){this.output=null,this.nodes=[],this.connections={in:[],out:[],self:[]}}u.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var e=0;e<this.nodes.length;e++){var r;r=void 0===t?this.nodes[e].activate():this.nodes[e].activate(t[e]),n.push(r)}return n},propagate:function(t,n,e){if(void 0!==e&&e.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var r=this.nodes.length-1;r>=0;r--)void 0===e?this.nodes[r].propagate(t,n,!0):this.nodes[r].propagate(t,n,!0,e[r])},connect:function(t,n,e){var r;return t instanceof o||t instanceof i?r=this.output.connect(t,n,e):t instanceof u&&(r=t.input(this,n,e)),r},gate:function(t,n){this.output.gate(t,n)},set:function(t){for(var n=0;n<this.nodes.length;n++){var e=this.nodes[n];e instanceof i?(void 0!==t.bias&&(e.bias=t.bias),e.squash=t.squash||e.squash,e.type=t.type||e.type):e instanceof o&&e.set(t)}},disconnect:function(t,n){var e,r,u;if(n=n||!1,t instanceof o)for(e=0;e<this.nodes.length;e++)for(r=0;r<t.nodes.length;r++){for(this.nodes[e].disconnect(t.nodes[r],n),u=this.connections.out.length-1;u>=0;u--){let n=this.connections.out[u];if(n.from===this.nodes[e]&&n.to===t.nodes[r]){this.connections.out.splice(u,1);break}}if(n)for(u=this.connections.in.length-1;u>=0;u--){let n=this.connections.in[u];if(n.from===t.nodes[r]&&n.to===this.nodes[e]){this.connections.in.splice(u,1);break}}}else if(t instanceof i)for(e=0;e<this.nodes.length;e++){for(this.nodes[e].disconnect(t,n),r=this.connections.out.length-1;r>=0;r--){let n=this.connections.out[r];if(n.from===this.nodes[e]&&n.to===t){this.connections.out.splice(r,1);break}}if(n)for(u=this.connections.in.length-1;u>=0;u--){let n=this.connections.in[u];if(n.from===t&&n.to===this.nodes[e]){this.connections.in.splice(u,1);break}}}},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()}},u.Dense=function(t){var n=new u,e=new o(t);return n.nodes.push(e),n.output=e,n.input=function(t,n,o){return t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL,t.connect(e,n,o)},n},u.LSTM=function(t){let n=new u,e=new o(t),i=new o(t),a=new o(t),s=new o(t),c=new o(t);e.set({bias:1}),i.set({bias:1}),s.set({bias:1}),a.connect(e,r.connection.ALL_TO_ALL),a.connect(i,r.connection.ALL_TO_ALL),a.connect(s,r.connection.ALL_TO_ALL);let f=a.connect(a,r.connection.ONE_TO_ONE),l=a.connect(c,r.connection.ALL_TO_ALL);return i.gate(f,r.gating.SELF),s.gate(l,r.gating.OUTPUT),n.nodes=[e,i,a,s,c],n.output=c,n.input=function(t,n,o){t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL;var c=[];let f=t.connect(a,n,o);return c=(c=(c=(c=c.concat(f)).concat(t.connect(e,n,o))).concat(t.connect(s,n,o))).concat(t.connect(i,n,o)),e.gate(f,r.gating.INPUT),c},n},u.GRU=function(t){var n=new u,e=new o(t),i=new o(t),a=new o(t),s=new o(t),c=new o(t),f=new o(t);f.set({bias:0,squash:r.activation.IDENTITY,type:"constant"}),s.set({squash:r.activation.TANH}),i.set({bias:0,squash:r.activation.INVERSE,type:"constant"}),e.set({bias:1}),a.set({bias:0}),f.connect(e,r.connection.ALL_TO_ALL),e.connect(i,r.connection.ONE_TO_ONE,1),f.connect(a,r.connection.ALL_TO_ALL);var l=f.connect(s,r.connection.ALL_TO_ALL);a.gate(l,r.gating.OUTPUT);var h=f.connect(c,r.connection.ALL_TO_ALL),p=s.connect(c,r.connection.ALL_TO_ALL);return e.gate(h,r.gating.OUTPUT),i.gate(p,r.gating.OUTPUT),c.connect(f,r.connection.ONE_TO_ONE,1),n.nodes=[e,i,a,s,c,f],n.output=c,n.input=function(t,n,o){t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL;var i=[];return i=(i=(i=i.concat(t.connect(e,n,o))).concat(t.connect(a,n,o))).concat(t.connect(s,n,o))},n},u.Memory=function(t,n){var e,i=new u,a=null;for(e=0;e<n;e++){var s=new o(t);s.set({squash:r.activation.IDENTITY,bias:0,type:"constant"}),null!=a&&a.connect(s,r.connection.ONE_TO_ONE,1),i.nodes.push(s),a=s}for(i.nodes.reverse(),e=0;e<i.nodes.length;e++)i.nodes[e].nodes.reverse();var c=new o(0);for(var f in i.nodes)c.nodes=c.nodes.concat(i.nodes[f].nodes);return i.output=c,i.input=function(t,n,e){if(t instanceof u&&(t=t.output),n=n||r.connection.ALL_TO_ALL,t.nodes.length!==i.nodes[i.nodes.length-1].nodes.length)throw new Error("Previous layer size must be same as memory size");return t.connect(i.nodes[i.nodes.length-1],r.connection.ONE_TO_ONE,1)},i},t.exports=u},function(t,n){t.exports={is:{required:t=>{throw new ReferenceError(`Parameter "${t}" is required; parameter "${t}" is missing.`)}}}},function(t,n,e){var r,o,i={activation:e(4),methods:e(0),Connection:e(5),architect:e(19),Network:e(3),config:e(1),Group:e(8),Layer:e(9),Node:e(2),Neat:e(29),GAN:e(30),multi:e(7)};void 0===(r=function(){return i}.apply(n,[]))||(t.exports=r),t.exports&&(t.exports=i),"object"==typeof window&&(o=window.carrot,i.ninja=function(){return window.carrot=o,i},window.carrot=i)},function(t,n,e){var r=e(4),o={ADD_NODE:{name:"ADD_NODE",randomActivation:!0},SUB_NODE:{name:"SUB_NODE",keep_gates:!0},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",min:-1,max:1},MOD_BIAS:{name:"MOD_BIAS",min:-1,max:1},MOD_ACTIVATION:{name:"MOD_ACTIVATION",mutateOutput:!1,allowed:[r.LOGISTIC,r.TANH,r.RELU,r.IDENTITY,r.STEP,r.SOFTSIGN,r.SINUSOID,r.GAUSSIAN,r.BENT_IDENTITY,r.BIPOLAR,r.BIPOLAR_SIGMOID,r.HARD_TANH,r.ABSOLUTE,r.INVERSE,r.SELU]},ADD_SELF_CONN:{name:"ADD_SELF_CONN"},SUB_SELF_CONN:{name:"SUB_SELF_CONN"},ADD_GATE:{name:"ADD_GATE"},SUB_GATE:{name:"SUB_GATE"},ADD_BACK_CONN:{name:"ADD_BACK_CONN"},SUB_BACK_CONN:{name:"SUB_BACK_CONN"},SWAP_NODES:{name:"SWAP_NODES",mutateOutput:!1}};o.ALL=[o.ADD_NODE,o.SUB_NODE,o.ADD_CONN,o.SUB_CONN,o.MOD_WEIGHT,o.MOD_BIAS,o.MOD_ACTIVATION,o.ADD_GATE,o.SUB_GATE,o.ADD_SELF_CONN,o.SUB_SELF_CONN,o.ADD_BACK_CONN,o.SUB_BACK_CONN,o.SWAP_NODES],o.FFW=[o.ADD_NODE,o.SUB_NODE,o.ADD_CONN,o.SUB_CONN,o.MOD_WEIGHT,o.MOD_BIAS,o.MOD_ACTIVATION,o.SWAP_NODES],t.exports=o},function(t,n){t.exports={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE"},POWER:{name:"POWER",power:4},TOURNAMENT:{name:"TOURNAMENT",size:5,probability:.5}}},function(t,n){t.exports={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}}},function(t,n){const e={CROSS_ENTROPY:function(t,n){let e=0;for(let r=0;r<n.length;r++)e-=t[r]*Math.log(Math.max(n[r],1e-15))+(1-t[r])*Math.log(1-Math.max(n[r],1e-15));return e/n.length},MSE:function(t,n){let e=0;for(let r=0;r<n.length;r++)e+=Math.pow(t[r]-n[r],2);return e/n.length},BINARY:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.round(2*t[r])!==Math.round(2*n[r]);return e},MAE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.abs(t[r]-n[r]);return e/n.length},MAPE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.abs((n[r]-t[r])/Math.max(t[r],1e-15));return e/n.length},WAPE:function(t,n){for(var e=0,r=0,o=0;o<n.length;o++)e+=Math.abs(t[o]-n[o]),r+=t[o];return e/r},MSLE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.log(Math.max(t[r],1e-15))-Math.log(Math.max(n[r],1e-15));return e},HINGE:function(t,n){for(var e=0,r=0;r<n.length;r++)e+=Math.max(0,1-t[r]*n[r]);return e}};t.exports=e},function(t,n){t.exports={OUTPUT:{name:"OUTPUT"},INPUT:{name:"INPUT"},SELF:{name:"SELF"}}},function(t,n){t.exports={ALL_TO_ALL:{name:"OUTPUT"},ALL_TO_ELSE:{name:"INPUT"},ONE_TO_ONE:{name:"SELF"}}},function(t,n){const e={FIXED:function(){return function(t,n){return t}},STEP:function(t=.9,n=100){return function(e,r){return e*Math.pow(t,Math.floor(r/n))}},EXP:function(t=.999){return function(n,e){return n*Math.pow(t,e)}},INV:function(t=.001,n=2){return function(e,r){return e*Math.pow(1+t*r,-n)}}};t.exports=e},function(t,n,e){var r=e(0),o=e(3),i=e(8),u=e(9),a=e(2),s={Construct:function(t){var n,e=new o(0,0),r=[];for(n=0;n<t.length;n++){let e;if(t[n]instanceof i)for(e=0;e<t[n].nodes.length;e++)r.push(t[n].nodes[e]);else if(t[n]instanceof u)for(e=0;e<t[n].nodes.length;e++)for(var s=0;s<t[n].nodes[e].nodes.length;s++)r.push(t[n].nodes[e].nodes[s]);else t[n]instanceof a&&r.push(t[n])}var c=[],f=[];for(n=r.length-1;n>=0;n--)"output"===r[n].type||r[n].connections.out.length+r[n].connections.gated.length===0?(r[n].type="output",e.output++,f.push(r[n]),r.splice(n,1)):"input"!==r[n].type&&r[n].connections.in.length||(r[n].type="input",e.input++,c.push(r[n]),r.splice(n,1));if(r=c.concat(r).concat(f),0===e.input||0===e.output)throw new Error("Given nodes have no clear input/output node!");for(n=0;n<r.length;n++){let t;for(t=0;t<r[n].connections.out.length;t++)e.connections.push(r[n].connections.out[t]);for(t=0;t<r[n].connections.gated.length;t++)e.gates.push(r[n].connections.gated[t]);0!==r[n].connections.self.weight&&e.selfconns.push(r[n].connections.self)}return e.nodes=r,e},Perceptron:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");var n=[];n.push(new i(t[0]));for(var e=1;e<t.length;e++){var o=t[e];o=new i(o),n.push(o),n[e-1].connect(n[e],r.connection.ALL_TO_ALL)}return s.Construct(n)},Random:function(t,n,e,i){var u,a=(i=i||{}).connections||2*n,s=i.backconnections||0,c=i.selfconnections||0,f=i.gates||0,l=new o(t,e);for(u=0;u<n;u++)l.mutate(r.mutation.ADD_NODE);for(u=0;u<a-n;u++)l.mutate(r.mutation.ADD_CONN);for(u=0;u<s;u++)l.mutate(r.mutation.ADD_BACK_CONN);for(u=0;u<c;u++)l.mutate(r.mutation.ADD_SELF_CONN);for(u=0;u<f;u++)l.mutate(r.mutation.ADD_GATE);return l},LSTM:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");var n,e=t.pop();"number"==typeof e?(n=new i(e),e={}):n=new i(t.pop()),n.set({type:"output"});var o={};o.memoryToMemory=e.memoryToMemory||!1,o.outputToMemory=e.outputToMemory||!1,o.outputToGates=e.outputToGates||!1,o.inputToOutput=void 0===e.inputToOutput||e.inputToOutput,o.inputToDeep=void 0===e.inputToDeep||e.inputToDeep;var u=new i(t.shift());u.set({type:"input"});var a=t,c=[];c.push(u);for(var f=u,l=0;l<a.length;l++){var h=a[l],p=new i(h),g=new i(h),v=new i(h),d=new i(h),_=l===a.length-1?n:new i(h);p.set({bias:1}),g.set({bias:1}),d.set({bias:1});var m=f.connect(v,r.connection.ALL_TO_ALL);f.connect(p,r.connection.ALL_TO_ALL),f.connect(d,r.connection.ALL_TO_ALL),f.connect(g,r.connection.ALL_TO_ALL),v.connect(p,r.connection.ALL_TO_ALL),v.connect(g,r.connection.ALL_TO_ALL),v.connect(d,r.connection.ALL_TO_ALL);var w=v.connect(v,r.connection.ONE_TO_ONE),y=v.connect(_,r.connection.ALL_TO_ALL);if(p.gate(m,r.gating.INPUT),g.gate(w,r.gating.SELF),d.gate(y,r.gating.OUTPUT),o.inputToDeep&&l>0){let t=u.connect(v,r.connection.ALL_TO_ALL);p.gate(t,r.gating.INPUT)}if(o.memoryToMemory){let t=v.connect(v,r.connection.ALL_TO_ELSE);p.gate(t,r.gating.INPUT)}if(o.outputToMemory){let t=n.connect(v,r.connection.ALL_TO_ALL);p.gate(t,r.gating.INPUT)}o.outputToGates&&(n.connect(p,r.connection.ALL_TO_ALL),n.connect(g,r.connection.ALL_TO_ALL),n.connect(d,r.connection.ALL_TO_ALL)),c.push(p),c.push(g),c.push(v),c.push(d),l!==a.length-1&&c.push(_),f=_}return o.inputToOutput&&u.connect(n,r.connection.ALL_TO_ALL),c.push(n),s.Construct(c)},GRU:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=new i(t.shift()),e=new i(t.pop()),r=t,o=[];o.push(n);for(var a=n,c=0;c<r.length;c++){var f=new u.GRU(r[c]);a.connect(f),a=f,o.push(f)}return a.connect(e),o.push(e),s.Construct(o)},Hopfield:function(t){var n=new i(t),e=new i(t);return n.connect(e,r.connection.ALL_TO_ALL),n.set({type:"input"}),e.set({squash:r.activation.STEP,type:"output"}),new s.Construct([n,e])},NARX:function(t,n,e,o,i){Array.isArray(n)||(n=[n]);var a=[],c=new u.Dense(t),f=new u.Memory(t,o),l=[],h=new u.Dense(e),p=new u.Memory(e,i);a.push(c),a.push(p);for(var g=0;g<n.length;g++){var v=new u.Dense(n[g]);l.push(v),a.push(v),void 0!==l[g-1]&&l[g-1].connect(v,r.connection.ALL_TO_ALL)}return a.push(f),a.push(h),c.connect(l[0],r.connection.ALL_TO_ALL),c.connect(f,r.connection.ONE_TO_ONE,1),f.connect(l[0],r.connection.ALL_TO_ALL),l[l.length-1].connect(h,r.connection.ALL_TO_ALL),h.connect(p,r.connection.ONE_TO_ONE,1),p.connect(l[0],r.connection.ALL_TO_ALL),c.set({type:"input"}),h.set({type:"output"}),s.Construct(a)},Liquid:function(){}};t.exports=s},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,e){var r={node:{TestWorker:e(23)},browser:{TestWorker:e(27)}};t.exports=r},function(t,n,e){t.exports=i;var r=e(24),o=e(25);function i(t,n){this.worker=r.fork(o.join(__dirname,"/worker")),this.worker.send({set:t,cost:n.name})}i.prototype={evaluate:function(t){return new Promise((n,e)=>{var r=t.serialize(),o={activations:r[0],states:r[1],conns:r[2]},i=this.worker;this.worker.on("message",function t(e){i.removeListener("message",t),n(e)}),this.worker.send(o)})},terminate:function(){this.worker.kill()}}},function(n,e){n.exports=t},function(t,n,e){(function(t){function e(t,n){for(var e=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),e++):e&&(t.splice(r,1),e--)}if(n)for(;e--;e)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};function i(t,n){if(t.filter)return t.filter(n);for(var e=[],r=0;r<t.length;r++)n(t[r],r,t)&&e.push(t[r]);return e}n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var u=o>=0?arguments[o]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,r="/"===u.charAt(0))}return(r?"/":"")+(n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"))||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===u(t,-1);return(t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var n=0;n<t.length&&""===t[n];n++);for(var e=t.length-1;e>=0&&""===t[e];e--);return n>e?[]:t.slice(n,e-n+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),u=Math.min(o.length,i.length),a=u,s=0;s<u;s++)if(o[s]!==i[s]){a=s;break}var c=[];for(s=a;s<o.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var n=o(t),e=n[0],r=n[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."},n.basename=function(t,n){var e=o(t)[2];return n&&e.substr(-1*n.length)===n&&(e=e.substr(0,e.length-n.length)),e},n.extname=function(t){return o(t)[3]};var u="b"==="ab".substr(-1)?function(t,n,e){return t.substr(n,e)}:function(t,n,e){return n<0&&(n=t.length+n),t.substr(n,e)}}).call(this,e(26))},function(t,n){var e,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=a(h);f=!0;for(var n=c.length;n;){for(s=c,c=[];++l<n;)s&&s[l].run();l=-1,n=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function g(t,n){this.fun=t,this.array=n}function v(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new g(t,n)),1!==c.length||f||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n,e){t.exports=o;var r=e(7);function o(t,n){var e=new Blob([this._createBlobString(n)]);this.url=window.URL.createObjectURL(e),this.worker=new Worker(this.url);var r={set:new Float64Array(t).buffer};this.worker.postMessage(r,[r.set])}o.prototype={evaluate:function(t){return new Promise((n,e)=>{var r=t.serialize(),o={activations:new Float64Array(r[0]).buffer,states:new Float64Array(r[1]).buffer,conns:new Float64Array(r[2]).buffer};this.worker.onmessage=function(t){var e=new Float64Array(t.data.buffer)[0];n(e)},this.worker.postMessage(o,[o.activations,o.states,o.conns])})},terminate:function(){this.worker.terminate(),window.URL.revokeObjectURL(this.url)},_createBlobString:function(t){return`\n      var F = [${r.activations.toString()}];\n      var cost = ${t.toString()};\n      var multi = {\n        deserializeDataSet: ${r.deserializeDataSet.toString()},\n        testSerializedSet: ${r.testSerializedSet.toString()},\n        activateSerializedNetwork: ${r.activateSerializedNetwork.toString()}\n      };\n\n      this.onmessage = function (e) {\n        if(typeof e.data.set === 'undefined'){\n          var A = new Float64Array(e.data.activations);\n          var S = new Float64Array(e.data.states);\n          var data = new Float64Array(e.data.conns);\n\n          var error = multi.testSerializedSet(set, cost, A, S, data, F);\n\n          var answer = { buffer: new Float64Array([error ]).buffer };\n          postMessage(answer, [answer.buffer]);\n        } else {\n          set = multi.deserializeDataSet(new Float64Array(e.data.set));\n        }\n      };`}}},function(t,e){t.exports=n},function(t,n,e){let r=e(6),o=e(10),i=e(3),u=e(0),a=e(1);t.exports=function(t,{generation:n=0,input:e=1,output:s=1,equal:c=!0,clean:f=!1,popsize:l=50,growth:h=1e-4,cost:p=u.cost.MSE,amount:g=1,elitism:v=1,provenance:d=0,mutationRate:_=.4,mutationAmount:m=1,fitnessPopulation:w=!1,fitness:y=function(n=t,e,r=1,o=u.cost.MSE,i=1e-4){let a=0;for(let t=0;t<r;t++)a-=e.test(n,o).error;return a-=(e.nodes.length-e.input-e.output+e.connections.length+e.gates.length)*i,(a=isNaN(a)?-1/0:a)/r},selection:O=u.selection.POWER,crossover:A=[u.crossover.SINGLE_POINT,u.crossover.TWO_POINT,u.crossover.UNIFORM,u.crossover.AVERAGE],mutation:b=u.mutation.FFW,efficientMutation:N=!1,template:T=new i(e,s),maxNodes:E=1/0,maxConns:x=1/0,maxGates:L=1/0,selectMutationMethod:S=this.selectMutationMethod}={}){let M=this;r.assignIn(M,{generation:n,input:e,output:s,equal:c,clean:f,popsize:l,growth:h,cost:p,amount:g,elitism:v,provenance:d,mutationRate:_,mutationAmount:m,fitnessPopulation:w,fitness:y,selection:O,crossover:A,mutation:b,efficientMutation:N,template:T,maxNodes:E,maxConns:x,maxGates:L,selectMutationMethod:S}),M.createPool=function(t,n){return Array(n).fill(i.fromJSON({...t.toJSON(),score:void 0}))},M.population=M.createPool(M.template,M.popsize),M.filterGenome=function(t,n,e,r){let o=[...t];const u=function(t){const n=e(t);if("boolean"!=typeof n)throw new Error("pickGenome must always return a boolean!");return n};if(r){for(let n=0;n<t.length;n++)if(u(o[n])){const t=r(o[n]);if(!(t instanceof i))throw new Error("adjustGenome must always return a network!");o[n]=t}}else for(let e=0;e<t.length;e++)u(o[e])&&(o[e]=i.fromJSON(n.toJSON));return o},M.selectMutationMethod=function(t,n,e){if(!e){let e=n||M.mutation,r=e[Math.floor(Math.random()*e.length)];return r===u.mutation.ADD_NODE&&t.nodes.length>=M.maxNodes?(a.warnings&&console.warn("maxNodes exceeded!"),null):r===u.mutation.ADD_CONN&&t.connections.length>=M.maxConns?(a.warnings&&console.warn("maxConns exceeded!"),null):r===u.mutation.ADD_GATE&&t.gates.length>=M.maxGates?(a.warnings&&console.warn("maxGates exceeded!"),null):r}{let e=n?[...n]:[...M.mutation],r=!1;for(;!r;){const n=e[Math.floor(Math.random()*e.length)];if((r=!(n===u.mutation.ADD_NODE&&t.nodes.length>=M.maxNodes||n===u.mutation.ADD_CONN&&t.connections.length>=M.maxConns||n===u.mutation.ADD_GATE&&t.gates.length>=M.maxGates)&&t.mutate(n))||!e||0===e.length)return;e=e.filter(function(t,e,r){return t.name!==n.name})}}},M.evolve=async function(n,e,u){if(M.elitism+M.provenance>M.popsize)throw new Error("Can't evolve! Elitism + provenance exceeds population size!");void 0===M.population[M.population.length-1].score&&await M.evaluate(r.isArray(n)?n:r.isArray(t)?t:o.is.required("dataset")),e&&(M.population=M.filterGenome(M.population,M.template,e,u)),M.sort();let a=[];for(let t=0;t<M.elitism;t++)a.push(M.population[t]);let s=Array(M.provenance).fill(i.fromJSON(M.template.toJSON()));for(let t=0;t<M.popsize-M.elitism-M.provenance;t++)s.push(M.getOffspring());M.population=s,M.mutate(),M.population.push(...a),await M.evaluate(r.isArray(n)?n:r.isArray(t)?t:o.is.required("dataset")),e&&(M.population=M.filterGenome(M.population,M.template,e,u)),M.sort();const c=i.fromJSON(M.population[0].toJSON());c.score=M.population[0].score;for(let t=0;t<M.population.length;t++)M.population[t].score=void 0;return M.generation++,c},M.getParent=function(){switch(M.selection.name){case"POWER":{M.population[0].score<M.population[1].score&&M.sort();let t=Math.floor(Math.pow(Math.random(),M.selection.power)*M.population.length);return M.population[t]}case"FITNESS_PROPORTIONATE":{let t=0,n=0;for(let e=0;e<M.population.length;e++){let r=M.population[e].score;n=r<n?r:n,t+=r}t+=(n=Math.abs(n))*M.population.length;let e=Math.random()*t,r=0;for(let t=0;t<M.population.length;t++){let o=M.population[t];if(e<(r+=o.score+n))return o}return M.population[Math.floor(Math.random()*M.population.length)]}case"TOURNAMENT":{if(M.selection.size>M.popsize)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");let t=[];for(let n=0;n<M.selection.size;n++){let n=M.population[Math.floor(Math.random()*M.population.length)];t.push(n)}t.sort(function(t,n){return n.score-t.score});for(let n=0;n<M.selection.size;n++)if(Math.random()<M.selection.probability||n===M.selection.size-1)return t[n]}}},M.getOffspring=function(){let t=M.getParent(),n=M.getParent();return i.crossOver(t,n,M.equal)},M.mutate=function(){for(let t=0;t<M.population.length;t++)if(Math.random()<=M.mutationRate)for(let n=0;n<M.mutationAmount;n++){const n=M.selectMutationMethod(M.population[t],M.mutation,M.efficientMutation);!M.efficientMutation&&M.population[t].mutate(n)}},M.evaluate=async function(t){if(M.fitnessPopulation){if(M.clear)for(let t=0;t<M.population.length;t++)M.population[t].clear();await M.fitness(t,M.population)}else for(let n=0;n<M.population.length;n++){const e=M.population[n];M.clear&&e.clear(),e.score=await M.fitness(t,e),M.population[n]=e}return M.sort(),M.population[0]},M.sort=function(){M.population.sort(function(t,n){return n.score-t.score})},M.getFittest=function(){return void 0===M.population[M.population.length-1].score&&M.evaluate(),M.population[0].score<M.population[1].score&&M.sort(),M.population[0]},M.getAverage=function(){void 0===M.population[M.population.length-1].score&&M.evaluate();let t=0;for(let n=0;n<M.population.length;n++)t+=M.population[n].score;return t/M.population.length},M.toJSON=function(){let t=[];for(let n=0;n<M.population.length;n++)t.push(M.population[n].toJSON());return t},M.fromJSON=function(t){let n=[];for(let e=0;e<t.length;e++)n.push(i.fromJSON(t[e]));M.population=n,M.popsize=n.length}}},function(t,n,e){e(3)}])});